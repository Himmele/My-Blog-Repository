StackExchange.question=(function(){var a=function(){return $("div.share-tip a[id^='link-post-']")};var d=function(e,i){var g=e!=null;if(!e){e=$('div#question div.post-menu a:contains("link")')}var j=e.closest(".post-menu");if(e.hasClass("share-link")){j.find(".close-share-tip").click()}else{e.addClass("share-link");var h=e.attr("id").substring("link-post-".length);var f=$('<div class="share-tip" style="display:none">share a link to this '+(e.closest("div#question").length?"question":"answer")+'<input type="text" value="http://'+document.location.host+e.attr("href")+'" style="display:block; width:292px;"><a class="close-share-tip" style="float:right">close</a></div>');if(i){f.find(".close-share-tip").before('<a id="link-post-'+h+'" style="float:left">cite</a>')}f.appendTo(j).fadeIn(g?"fast":0).bind("removing",function(){e.removeClass("share-link")}).find(".close-share-tip").click(function(){f.fadeOutAndRemove()}).end().find("input[type=text]").select()}};var c=function(q){var e=$("#post-form h2:first"),f=e.wrap("<div />").parent(),h=f.wrap("<div />").parent(),i=$("<div />").prependTo(h),j=h.height(),p=$("<div />"),o=$(q),k=parseInt(e.css("margin-bottom")),l=$("#content"),g=$("#wmd-input").outerWidth(),m=1000,n=l.offset().left>e.offset().left-5&&l.css("overflow-x")!="visible";p.css({height:0,overflowY:"hidden"}).appendTo(f).append(o);h.css({height:j,position:"relative"});f.css({position:"absolute",bottom:-k,width:g});i.addClass("answer-help-background").css({position:"absolute",bottom:-k,height:0,width:g});if(n){i.css("left",0);f.animate({paddingLeft:5},m)}p.animate({height:o.height()+k+10},m);i.animate({height:o.height()+k+10+j},m);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(f).fadeIn(1000).find("a").one("click",function(s){var r=$(this).parent();setTimeout(function(){r.remove()},1);p.animate({height:0},m,function(){p.add(i).remove();e.unwrap().unwrap()});i.animate({height:0},m);if(n){f.animate({paddingLeft:0},m)}s.preventDefault()})};var b=function(){$.get("/posts/answer-help").then(c)};return{showShareTip:d,init:function(e){window.votesCast=e.votesCast;StackExchange.vote.init(e.questionId);StackExchange.suggestedEdits.bindPopupLinks();StackExchange.comments.init({autoShowCommentHelp:e.autoShowCommentHelp});if(e.canViewVoteCounts){StackExchange.vote.bindFetchVoteCounts()}if(e.showShareTip){d()}StackExchange.vote_bounty.init(e);$('.post-menu a:contains("link")').click(function(){d($(this),e.showCitation);return false});if(e.showAnswerHelp){$("#wmd-input").one("focus",b)}if(e.showCitation){a().live("click",function(){var f=$(this).closest(".post-menu");f.find(".close-share-tip").click();citation.show($(this))})}}}})();StackExchange.vote=(function(){var m=StackExchange.helpers;var l={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12};var F="View upvote and downvote totals";var j=function(){var M='<a href="/users/login?returnurl='+escape(document.location)+'">login or register</a>';z().click(function(){a($(this),"Please "+M+" to vote for this post.")});h().unbind("click").click(function(){a($(this),"Please "+M+" to flag this post.")})};var B=false;var L=function(M){if(B){var N=M.is('[id^="flag-post-"]')?"flag":M.is(".star-off")?"favorite":"vote for";a(M,'Please <a href="/users/login?returnurl='+escape(document.location)+'">login or register</a> to '+N+" this post.")}return B};var A=function(M){if(!M){M="div.vote"}$(M).find(".vote-up-off").unbind("click").click(function(){n($(this))});$(M).find(".vote-down-off").unbind("click").click(function(){k($(this))})};var z=function(M){var N=M?M.closest("div.vote"):$("div.vote");return N.find(".vote-up-off, .vote-down-off").unbind("click")};var c=function(M){$.each(M,function(){var N=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case l.upMod:N.find(".vote-up-off").addClass("vote-up-on");break;case l.downMod:N.find(".vote-down-off").addClass("vote-down-on");break;case l.favorite:N.find(".star-off").addClass("star-on");N.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId);break}});votesCast=null};var x=function(M){$.ajax({type:"GET",url:"/posts/"+M+"/votes",dataType:"json",success:c})};var n=function(R){var P=R.parent().find(".vote-up-off");var M=R.parent().find(".vote-down-off");var N=g(P);var Q=J(M);var O=N?-1:(Q?2:1);p(R,O);u(P,M);if(!N){P.addClass("vote-up-on")}o(R,N?l.undoMod:l.upMod)};var k=function(R){var P=R.parent().find(".vote-up-off");var M=R.parent().find(".vote-down-off");var N=J(M);var Q=g(P);var O=N?1:(Q?-2:-1);p(R,O);u(P,M);if(!N){M.addClass("vote-down-on")}o(R,N?l.undoMod:l.downMod)};var s=function(){return $("div.vote a[id^='vote-accepted-']")};var d=function(){return $("div.post-menu a[id^='lock-post-']")};var h=function(){return $("div.post-menu a[id^='flag-post-']")};var q=function(){return $("div.post-menu a[id^='protect-post-']")};var G=function(){return $("div.post-menu a[id^='unprotect-post-']")};var g=function(M){return M.hasClass("vote-up-on")};var J=function(M){return M.hasClass("vote-down-on")};var b=function(M){return M.hasClass("star-on")};var C=function(M){return M.closest("div.vote").find("input").val()};var u=function(N,M){N.removeClass("vote-up-on");M.removeClass("vote-down-on")};var p=function(R,P){var O=R.siblings("span.vote-count-post");var Q;if(O.find(".vote-count-separator").length>0){var M=parseInt(O.children(":first").text(),10);var N=Math.abs(parseInt(O.children(":last").text(),10));Q=M-N;O.css("cursor","pointer").unbind("click").attr("title",F).click(function(){y($(this))})}else{Q=parseInt(O.text(),10)}O.text(Q+P)};var o=function(M,N){z(M);var O=C(M);w(M,O,N,E)};var w=function(T,Q,P,N,M,O){var R={fkey:StackExchange.options.user.fkey};if(M){for(var S in M){R[S]=M[S]}}$.ajax({type:"POST",url:"/posts/"+Q+"/vote/"+P,data:R,dataType:"json",success:function(U){N(T,Q,U)},error:function(){a(T,"An error has occurred - please retry your request.")},complete:O})};var E=function(M,O,N){if(N.Success){if(N.Message){i(M,N.Message)}if(N.ShowShareTip){StackExchange.question.showShareTip()}}else{if(window.console&&window.console.firebug&&(!N.Message||N.Message.length<5)){a(M,"FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.")}else{a(M,N.Message);u(M,M);M.parent().find("span.vote-count-post").text(N.NewScore);if(N.LastVoteTypeId){f(M,N.LastVoteTypeId)}}}A(M.parent())};var f=function(M,N){var P,O;if(N==l.upMod){P=".vote-up-off";O="vote-up-on"}else{if(N==l.downMod){P=".vote-down-off";O="vote-down-on"}}if(P){M.closest("div.vote").find(P).addClass(O)}};var a=function(M,N){m.showErrorPopup(M.parent(),N)};var i=function(M,N){m.showErrorPopup(M.parent(),N,true)};var r=function(){$(".star-off:not(.disabled)").live("click",function(M){e($(this));M.preventDefault()})};var e=function(N){if(L(N)){return}if(N.data("loading")){return}N.data("loading",true);var Q=C(N)||N.siblings("input[type=hidden]").val();var P=N.parent().find("div.favoritecount b");var M=parseInt("0"+P.text().replace(/^\s+|\s+$/g,""),10);var O=function(){if(b(N)){N.removeClass("star-on");P.removeClass("favoritecount-selected").text((M--<=0)?"":M)}else{N.addClass("star-on");P.addClass("favoritecount-selected").text(++M)}};O();w(N,Q,l.favorite,function(R,T,S){N.data("loading",false);if(!S.Success){O();N.parent().showErrorPopup(S.Message)}})};var I=function(M){$("div.post-menu *[id^='delete-post-']").unbind("click").click(function(){H($(this),M)})};var H=function(M,O){var P=M.attr("id").substring("delete-post-".length);var N=M.text().indexOf("undelete")>-1;if(confirm("Vote to "+(N?"un":"")+"delete this post?")){w(M,P,(N?l.undeletion:l.deletion),O||v)}};var v=function(S,R,N){var P=S.text().indexOf("undelete")>-1;if(N&&N.Success){S.text(N.Message);if(N.NewScore<0){var Q=$("#question:has(a[id='delete-post-"+R+"'])").length>0;var M=Q?"#question, div.answer":"#answer-"+R;K($(M),!P)}else{a(S,"This post still needs "+N.NewScore+" vote(s) from other users to "+(P?"un":"")+"delete")}}else{var O=(N&&N.Message)?N.Message:"A problem occurred during "+(P?"un":"")+"deletion";m.showErrorPopup(S.parent(),O)}};var K=function(N,M){if(M){$("div.question-status:has(span:contains('delete'))").show();N.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted")}else{document.location.reload(true)}};var t=function(M){var N=M.attr("id").substring("vote-accepted-".length);s().unbind("click");w(M,N,l.acceptedByOwner,function(O,R,Q){if(Q.Success){$(".vote-accepted-off").removeClass("vote-accepted-on");var P=parseInt(Q.Message,10);if(P==l.acceptedByOwner){O.addClass("vote-accepted-on")}else{O.removeClass("vote-accepted-on")}}else{a(O,Q.Message)}s().click(function(){t($(this))})})};var y=function(M){var N=M.closest("div.vote").children('input[type="hidden"]').val();StackExchange.helpers.addSpinner(M);$.ajax({type:"GET",url:"/posts/"+N+"/vote-counts",dataType:"json",success:function(O){$(".error-notification").fadeOut("fast",function(){$(this).remove()});var P='<div style="color:green">'+O.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+O.down+"</div>";M.html(P).unbind("click").css("cursor","default").attr("title",(O.up+" up / "+O.down+" down"))},error:function(O,Q,P){StackExchange.helpers.removeSpinner();m.showErrorPopup(M.parent(),(O.responseText&&O.responseText.length<100?O.responseText:"An error occurred during vote count fetch"))}})};var D=function(){$(".vote-count-post").attr("title",F).css("cursor","pointer").unbind("click").click(function(){y($(this))})};return{init:function(M){B=!(StackExchange.options.user.isRegistered);if(B){j()}else{if(votesCast==null){x(M)}else{c(votesCast)}A();q().unbind("click").click(function(){var N=this.id.substring("protect-post-".length);if(confirm("Are you sure you want to protect this question?")){$.ajax({type:"POST",url:"/question/protect",data:{id:N,fkey:StackExchange.options.user.fkey},success:function(O){location.reload(true)}})}return false});G().unbind("click").click(function(){var N=this.id.substring("unprotect-post-".length);if(confirm("Are you sure you want to unprotect this question?")){$.ajax({type:"POST",url:"/question/unprotect",data:{id:N,fkey:StackExchange.options.user.fkey},success:function(O){location.reload(true)}})}return false});StackExchange.vote_closingAndFlagging.init()}r();s().unbind("click").click(function(){t($(this))});I()},up:n,down:k,favorite_init:r,delete_init:I,bindFetchVoteCounts:D,highlightExistingVotes:c,submit:w,voteTypeIds:l,getPostId:C}})();StackExchange.vote_closingAndFlagging=(function(){var g=StackExchange.vote.voteTypeIds;var e=function(){return $("div.post-menu a[id^='flag-post-']")};var u=function(v){var x=v.text().indexOf("open")>-1;var w=v.attr("id").substring("close-question-".length);if(x){if(confirm("Nominate this question for reopening?")){StackExchange.vote.submit(v,w,g.reopen,p)}}else{a(v,w)}};var a=function(x,z,y,w){var v=x.parent();if(!y){x.addSpinnerAfter({padding:"0 3px"})}$.ajax({type:"GET",url:"/posts/popup/close/"+z+(y?"?isForFlagging=1":""),dataType:"html",success:function(A){var B=$(A);if(w){w.fadeOut("fast");n=B}B.appendTo(v);o(B,x,w);B.center().fadeIn("fast")},error:function(){v.showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})};var o=function(x,B,z){x.find(".popup-close").click(function(){x.fadeOutAndRemove();if(z){z.remove()}});var v=x.find(".popup-actions-cancel");if(z){v.text("back").click(function(){x.fadeOut("fast");z.fadeIn("fast")})}else{v.click(function(){x.fadeOutAndRemove()})}var A=x.find(".popup-submit");x.find('input[type=radio]:not(input[name="existing-close"])').click(function(){var C=$(this);var D=C.closest("li");if(D.hasClass("action-selected")){return}if(!d(C)){A.enable();x.find(".popup-active-pane li.action-selected").removeClass("action-selected");D.addClass("action-selected")}});var w=$("#duplicate-question");var y=$("#duplicate-question-id");w.helpOverlay().typeWatch({highlight:false,wait:750,captureLength:-1,callback:function(){h(A,w,questionId,y)}});$(".existing-linked-questions input[type=radio]").click(function(){w.hideHelpOverlay().val($(this).parent().attr("title")).keydown()});$("#close-question-form").submit(function(){l(x,B,$(this),y,A);return false})};var l=function(x,A,w,z,y){if(y.attr("disabled")){return}$("#remaining-votes").addSpinner({position:"absolute",margin:"3px 0 0 5px"});y.disable();var v=(x.find("input[name=isForFlagging]").length>0);$.ajax({type:"POST",url:w.attr("action"),dataType:"json",data:{fkey:StackExchange.options.user.fkey,isForFlagging:v,"close-reason-id":$("#pane-main input[type=radio]:checked").val(),"migration-site-id":$('input[type=radio][id^="close-offtopic-"]:checked').val(),"duplicate-question-id":z.val()},success:function(B){p(A,questionId,B,v)},error:function(B,D,C){A.parent().showErrorPopup("A problem occurred when trying to "+A.text().indexOf("open")>-1?"reopen":"close")},complete:function(){StackExchange.helpers.removeSpinner();x.fadeOutAndRemove()}})};var p=function(A,z,v,w){var y=A.text().indexOf("open")>-1?"reopen":"close";if(v.Success){if(v.Message){var x=A.parent();if(w){x.showErrorPopup(v.Message)}else{A.text(A.text().replace(/\w?\(\d\)/,"")+" "+v.Message);x.showErrorPopup("This question still needs "+v.NewScore+" vote(s) from other users to "+y)}}else{if(v.RedirectTo){location.href=v.RedirectTo}else{location.reload(true)}}}else{A.parent().showErrorPopup(v.Message||"A problem occurred when trying to "+y)}};var d=function(w){var v=w.attr("id").substr("close-".length);var x=$("#pane"+v);if(x.length==0){return false}$("#pane-main").removeClass("popup-active-pane").hide();x.addClass("popup-active-pane").show();w.closest("div.popup").find(".popup-actions-cancel").html("back").unbind("click").click(f);window["pane"+v]();return true};var f=function(){$(".popup-subpane").removeClass("popup-active-pane").hide();$("#pane-main").addClass("popup-active-pane").show().find("input[type=radio]:checked").removeAttr("checked").end().find("li.action-selected").removeClass("action-selected");$(".popup").find(".popup-submit").disable().end().find(".popup-actions-cancel").html("cancel").unbind("click").click(function(){$(".popup").fadeOutAndRemove()})};var h=function(z,x,w,v){var y=x.parent().find(".selected-master-preview");z.disable();y.html("");if($.trim(x.val()).length==0){return}StackExchange.helpers.addSpinner(y);$.ajax({type:"GET",url:"/posts/validate-duplicate-question/"+w,data:{val:x.val()},dataType:"json",success:function(A){if(A.success){v.val(A.id);r(y,A);z.enable()}else{if(A.title){y.html(A.title)}else{y.html("")}}},error:function(A,C,B){StackExchange.helpers.removeSpinner();StackExchange.helpers.showErrorPopup(x.parent(),(A.responseText&&A.responseText.length<100?A.responseText:"An error occurred during duplicate validation"))}})};var r=function(x,w){var v='<div class="post-text" style="max-height: 400px; overflow: auto;"><h3><a href="'+w.url+'" target="_blank">'+w.title+"</a></h3><p>"+w.body+"</p></div><p>"+w.tags+"</p>";x.html(v)};var n;var q=function(v){var w=v.attr("id").substring("flag-post-".length);v.loadPopup({url:"/posts/popup/flag/"+w,loaded:c,hideDescriptions:true,actionSelected:b,subformShow:k})};var c=function(v){n=null;s(v);v.find("form").submit(function(){j(v);return false});$("#flag-load-close").unbind("click").click(function(){m(v,$(this))})};var b=function(w){var x=w.find("input:radio").attr("id").substr("flag-".length);var v=x==g.offensive||x==g.spam;$(".flag-remaining-spam").toggle(v);$(".flag-remaining-inform").toggle(!v)};var s=function(w){var x=w.find(".popup-submit");var v=w.find('textarea[name="flag-reason"]');v.focus(function(){v.hideHelpOverlay();var z=v.closest("li").find("input:radio");if(!z.is(":checked")){z.attr("checked","checked")}}).charCounter({min:10,max:500,setIsValid:function(z){x.enable(z)}});var y=v.closest(".action-subform");y.find("input.flag-prefilled").click(function(){x.enable()});y.find('input[value="other"]').click(function(){v.focus()});y.find("label, input:radio").css("cursor","pointer")};var k=function(w){if(!w.is(".mod-attention-subform")){return}var v=w.find('textarea[name="flag-reason"]');v.helpOverlay();if(w.find("input[value=other]:checked").length){v.focus()}else{if(!w.find("input:radio:checked").length){w.closest(".popup").find(".popup-submit").disable()}}};var m=function(x,y){y.closest("li").siblings("li").trigger("hide-action");if(n){x.fadeOut("fast");n.fadeIn("fast")}else{y.siblings(".action-name").addSpinner({margin:"0 5px"});var z=x.attr("id").substr("flag-popup-".length);var w=$("#flag-post-"+z);var v=$("#flag-isClosePopupForFlagging").val()=="true";a(w,z,v,x)}x.find(".popup-submit").disable();y.removeAttr("checked")};var j=function(x){x.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var y=x.attr("id").substr("flag-popup-".length);var w=$("#flag-post-"+y);var v=x.find('input[name="flag-post"]:checked').val();if(v==g.informModerator){i(x,y,w)}else{StackExchange.vote.submit(w,y,v,t,null,function(){x.fadeOutAndRemove()})}};var i=function(w,x,y){var A=w.find(".mod-attention-subform");var v=A.find("input:radio:checked");var z=v.val()=="other"?A.find('textarea[name="flag-reason"]').val():v.val();$.ajax({type:"POST",url:"/messages/inform-moderator-about-post/"+x,dataType:"json",data:{fkey:StackExchange.options.user.fkey,msg:z},success:function(B){y.parent().showErrorPopup(B.Message)},error:function(B,D,C){y.parent().showErrorPopup(B.responseText&&B.responseText.length<100?B.responseText:"An error occurred during submission")},complete:function(){w.fadeOutAndRemove()}})};var t=function(w,x,v){if(v.Refresh){location.reload(true)}else{w.parent().showErrorPopup(v.Message)}};return{init:function(){var v=$("div.post-menu a[id^='close-question-']");v.unbind("click").click(function(){u(v)});e().unbind("click").click(function(){q($(this))})}}})();StackExchange.vote_bounty=(function(){var g;var c=function(q,m,h){var j=$(".bounty-vote");if(h.Success){$("#bounty-notification").remove();g=false;var n=q.closest("td.votecell").parent().find("span.reputation-score:last");if(h.Message){var p=$(h.Message);n.text(p.text()).attr("title",p.attr("title"))}var o=q.closest("div.vote").find(".bounty-award-container");if(o.length>1){var k=o.filter(":first").find(".bounty-award");var i=parseInt(k.text(),10);var l=parseInt(q.text(),10);k.text("+"+(i+l));j.remove()}else{q.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off");j.not(q).remove()}}else{StackExchange.helpers.showErrorPopup(q.parent(),h.Message);j.removeClass("disabled")}};var a=function(h){if(g){return confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!")}return true};var d=function(h){var i=StackExchange.vote.getPostId(h);if(!a(i)){return}$(".bounty-vote").addClass("disabled");StackExchange.vote.submit(h,i,StackExchange.vote.voteTypeIds.bountyClose,c)};var e=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){d($(this))})};var f=function(){var h=$("#bounty-link");h.click(function(){$("#bounty").toggle();h.text(h.text().indexOf("start")>-1?"hide bounty":"start a bounty")});var i=$("#bounty-start");i.click(function(){var j=$("#bounty-amount").val();if(!confirm("Are you sure you want to start a bounty of "+j+" on this question?")){return}i.disable();b(j)})};var b=function(i){var j=$("#question div.vote input:first").val();var k=$("#bounty");var h=$("#bounty-start");h.addSpinnerAfter({"padding-left":"3px"});$.ajax({type:"POST",url:"/posts/"+j+"/bounty-start",dataType:"json",data:{fkey:StackExchange.options.user.fkey,amount:i},success:function(l){if(l.Success){location.reload(true)}else{k.showErrorPopup(l.Message);h.enable()}},error:function(l,n,m){k.showErrorPopup(l.responseText&&l.responseText.length<100?l.responseText:"An error occurred when starting bounty")},complete:StackExchange.helpers.removeSpinner})};return{init:function(h){g=!!h.hasOpenBounty;if(h.canOpenBounty){f()}if(h.hasOpenBounty){e()}}}})();StackExchange.comments={init:function(a){if(StackExchange.options.user.isAnonymous){StackExchange.commentsPassive.init()}else{StackExchange.commentsActive.init(a)}}};StackExchange.commentsPassive=(function(){var c=function(f,g){return $("div#comments-"+f+(g||""))};var b=function(h,f,g){if(!f){f=c(h)}StackExchange.helpers.addSpinner(f);$.ajax({type:"GET",url:"/posts/"+h+"/comments",dataType:"html",success:function(i){d(h,i,g)},error:function(i,k,j){StackExchange.helpers.showErrorPopup(c(h),(i.responseText&&i.responseText.length<100?i.responseText:"An error has occured while fetching comments"))},complete:StackExchange.helpers.removeSpinner})};var d=function(i,g,h){var f=c(i," > table > tbody");if(f.children().length>0){f.children().remove()}f.append(g);StackExchange.helpers.removeSpinner();if(h){h()}if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}};var e=function(){$("a[id^='comments-link-']").unbind("click").click(function(){var f=$(this);c(f.attr("id").substr("comments-link-".length)).removeClass("dno");a(f,function(){f.remove()})})};var a=function(f,h){if(f.text().indexOf("more comment")>-1){var i=f.attr("id").substr("comments-link-".length);var g=c(i);b(i,g,h);return true}return false};return{loadRest:a,init:e,jCommentsDiv:c,showComments:d}})();StackExchange.commentsActive=function(){var e;var d=600;var m;var r=function(){p();j()};var g=function(s,t){StackExchange.commentsPassive.showComments(s,t,r)};var c=function(){$("a[id^='comments-link-']").unbind("click").click(function(){var w=$(this).attr("id").substr("comments-link-".length);var v=StackExchange.commentsPassive.jCommentsDiv(w);var s=v.find('form[id^="add-comment-"]');if(s.children().length==0){o(w);v.removeClass("dno");if(!StackExchange.commentsPassive.loadRest($(this),r)){var u=200+($('form[id^="add-comment-"] > table').length*2);var t=v.find("tfoot form textarea");t.attr("tabindex",u++);v.find("tfoot form input").attr("tabindex",u);if(!t.closest("form").hasClass(".comment-form-expanded")){t.focus()}}}else{s.show().find("textarea").focus()}$(this).hide().text("add comment")})};var j=function(s){$(".comment-up").click(function(){n($(this),2,"comment-up","comment-up-on",function(u,t){u.closest("tr").siblings("tr").remove();u.parent().siblings().children().remove();u.parent().siblings().append(b(t.NewScore))})}).hover(function(){$(this).addClass("comment-up-on")},function(){$(this).removeClass("comment-up-on")});$(".comment-flag").click(function(){if(confirm("Really flag this comment as unconstructive, offensive or spam?")){n($(this),4,"comment-flag","flag-on",function(u,t){if(t.NewScore==-1){u.parents("tr.comment").remove()}else{u.parents("tr.comment").find("img.comment-up").remove();u.remove()}})}}).hover(function(){$(this).addClass("flag-on")},function(){$(this).removeClass("flag-on")});$("div.comments a.comment-edit, td.comment-summary a.comment-edit").click(function(){h($(this))});$(".comment-delete").click(function(){if(confirm("Really delete this comment?")){n($(this),10,"comment-delete","delete-tag-hover",function(u,v){var t=u.parents("tr.comment");if(s){s(t)}t.remove()})}}).hover(function(){$(this).addClass("delete-tag-hover")},function(){$(this).removeClass("delete-tag-hover")});if(e){$("tr.comment").find(".comment-delete, a.comment-edit-hide").css("visibility","visible")}else{$("tr.comment").hover(function(){$(this).addClass("comment-hover").find(".comment-up, .comment-flag, .comment-delete, a.comment-edit-hide").css("visibility","visible")},function(){$(this).removeClass("comment-hover").find(".comment-up, .comment-flag, .comment-delete, a.comment-edit-hide").css("visibility","hidden")})}};var p=function(){$("tr.comment").unbind("mouseenter mouseleave");$(".comment-up, .comment-flag, .comment-delete, div.comments a.comment-edit").unbind("click mouseenter mouseleave")};var b=function(s){var u="";if(s&&s>0){var t=s<5?"":s<=15?"warm":s<=30?"hot":"supernova";u+='<span title="number of \'great comment\' votes received" class="'+t+'">'+s+"</span>"}return u};var a=function(s){s.find("textarea").keyup(function(t){if(t.which==13&&!t.shiftKey){s.submit()}}).keypress(function(t){if(t.which==13&&!t.shiftKey){return false}})};var l=function(z,t,w,x){var v='<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input type="submit" value="'+t+'"/>'+(w?'<a class="edit-comment-cancel">cancel</a>':"")+'<br/><a class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';z.append(v);if(w){z.find(".edit-comment-cancel").click(function(){i($(this))})}var y=false;var s=function(A){y=A};var u=z.find("textarea");u.charCounter({min:15,max:600,setIsValid:s});z.find(".comment-help-link").click(q);if(m){u.one("focus",q)}z.submit(function(){if(y){StackExchange.helpers.disableSubmitButton(z);StackExchange.helpers.addSpinner(z.find('input[type="submit"]').parent(),{"margin-left":"10px"});x(z)}else{z.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)})}return false});a(z)};var q=function(x){var y=$(this).closest("tbody");var t=y.find(".comment-help-link");var z=$(".comment-help",y);var w;if(x.type=="click"){w=z.length==0||!z.is(":visible");if(!w){q.manualOnly=true}}else{if(q.manualOnly){return}else{w=true}}var s=function(){t.text(w?"hide help":"help")};if(z.length>0){if(w){z.slideDown(s)}else{z.slideUp(s)}return}if(!w){return}var u=$("<tr />").appendTo(y);var v=$("<td colspan='2' />").appendTo(u);if(q.helpText){v.html(q.helpText);$(".comment-help",v).slideDown(s)}else{StackExchange.helpers.addSpinner(t);v.load("/posts/comment-help",function(A){q.helpText=A;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(s)})}};var o=function(s){l($("#add-comment-"+s),"Add Comment",false,f)};var f=function(s){var w=s.attr("id").substr("add-comment-".length);var u=function(){$(".error-notification").fadeOutAndRemove()};var v=s.find("textarea");var t=v.val();if(!t||$.trim(t)==""){return}$.ajax({type:"POST",url:"/posts/"+w+"/comments",dataType:"html",data:{comment:t,fkey:StackExchange.options.user.fkey},success:function(x){u();g(w,x);v.val("").keyup();StackExchange.helpers.enableSubmitButton(s);s.hide().closest(".comments").siblings('a[id^="comments-link"]').show()},error:function(x,z,y){u();StackExchange.helpers.showErrorPopup(s,(x.responseText&&x.responseText.length<100?x.responseText:"An error occurred during comment submission"));StackExchange.helpers.enableSubmitButton(s)},complete:StackExchange.helpers.removeSpinner})};var h=function(v){var t=v.closest("tr.comment");var s=t.find('form[id^="edit-comment-"]');t.find("td.comment-actions *").hide();t.find("td.comment-text > div").hide();t.find("td:last").addClass("comment-form");l(s,"Save Edits",true,k);var u=s.find("textarea");u.val(s.find("div").text());s.show();u.focus()};var k=function(y){var t=y.attr("id").substr("edit-comment-".length);var x=y.closest("div.comments, td.comment-summary");var s=x.attr("id").substr("comments-".length);var w=function(){$(".error-notification").fadeOut("fast",function(){$(this).remove()})};var u=y.find("textarea");var v=u.val();if(!v||$.trim(v)==""){return}$.ajax({type:"POST",url:"/posts/comments/"+t+"/edit",dataType:"html",data:{comment:v,fkey:StackExchange.options.user.fkey},success:function(z){w();if(e){x.find("#comment-"+t+" .comment-text .comment-copy").text(v);i(y)}else{g(s,z)}},error:function(z,B,A){w();StackExchange.helpers.showErrorPopup(y,(z.responseText&&z.responseText.length<100?z.responseText:"An error occurred during comment submission"));StackExchange.helpers.enableSubmitButton(y)},complete:StackExchange.helpers.removeSpinner})};var i=function(u){var t=u.closest("tr.comment");var s=t.find('form[id^="edit-comment-"]');s.children("table").remove();s.hide();t.find("td:last").removeClass("comment-form");t.find("td.comment-actions *").show();t.find("td.comment-text > div").show()};var n=function(z,t,x,y,v){var w=z.parents("tr.comment").attr("id").substr("comment-".length);$("div.error-notification").hide();z.removeClass(x).unbind("click mouseenter mouseleave").addClass(y);StackExchange.helpers.addSpinner(z.parent());var s=function(){z.removeClass(y).addClass(x).click(function(){n(z,t,x,y,v)})};var u="#comment-"+w+" td.comment-actions";$.ajax({type:"POST",url:"/posts/comments/"+w+"/vote/"+t,dataType:"json",data:{fkey:StackExchange.options.user.fkey},success:function(A){if(A.Success){v(z,A)}else{StackExchange.helpers.showErrorPopup(u,A.Message);s()}},error:function(A,C,B){StackExchange.helpers.showErrorPopup(u,(A.responseText&&A.responseText.length<100?A.responseText:"An error occurred during voting"));s()}});StackExchange.helpers.removeSpinner()};return{init:function(s){s=s||{};e=s.isAdminPage;m=s.autoShowCommentHelp;c();j(s.deleteCallback);$("form.comment-form-expanded").closest("div.comments").siblings("a.comments-link").click()}}}();StackExchange.share=(function(){function a(c,d,b){if(!window.open(c,d,b)){window.location.href=c}}return{twitter:function(c,b,d){c.click(function(){a("http://twitter.com/share?url="+encodeURIComponent(b)+"&ref=twitbtn&text="+encodeURIComponent(d),"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(c,b,d){c.click(function(){a("http://www.facebook.com/sharer.php?u="+encodeURIComponent(b)+"&ref=fbshare&t="+encodeURIComponent(d),"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}})();function initTagRenderer(b,a){if(window.tagRenderer){return}window.tagRendererRaw=function(c,f){f=f||"";var e="";if(!f){if(b&&$.inArray(c,b)>-1){e=" required-tag"}else{if(a&&$.inArray(c,a)>-1){e=" moderator-tag"}}}var d="<a class='post-tag"+e+"' href='"+f+"/questions/tagged/"+encodeURIComponent(c)+"' title=\"show questions tagged '"+c+"'\" rel='tag'>"+c+"</a>";return d};window.tagRenderer=function(d,c){return $(tagRendererRaw(d,c))}}function initFadingHelpText(){var b={"wmd-input":"#how-to-format",tagnames:"#how-to-tag",title:"#how-to-title"};var a=$("#wmd-input, #tagnames, #title");var c=function(d){return b[$(d).attr("id")]};a.focus(function(){var e=c(this);a.each(function(){var f=c(this);if(f!=e){$(f).hide()}});var d=$(e);if(!d.is(":visible")){$(e).wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}})}StackExchange.navPrevention=(function(){var b;var c=function(f){var e=false;f.each(function(){e=e||($.trim($(this).val())!="")});return e};var d=function(e){window.onbeforeunload=e?function(){if(b&&c(b)){return e}}:null};var a=function(e){d("You have started writing or editing a post.")};return{init:function(e){b=e.one("keypress",a)},stop:function(){if(!b){return}b.unbind("keypress",a);d(null);b=null}}})();function lazyEditorReady(f,a,e){if(window.editorReady){editorReady(f,a);return}var j="bold-button italic-button spacer1 link-button quote-button code-button image-button spacer2 olist-button ulist-button heading-button hr-button spacer3 undo-button redo-button".split(" ");var d=$('<ul id="wmd-button-row" />').appendTo("#wmd-button-bar");for(var c=0;c<j.length;c++){var h=j[c];$("<li id='wmd-"+h+"' />").attr("class","wmd-"+(/spacer/.test(h)?"spacer":"button")).css("background-position-y","-20px").appendTo(d)}var g=false;$("#wmd-input, #title, #tagnames, #edit-comment, #m-address, #display-name").one("focus click keydown",function(){if(g){return}g=true;var b=function(){if(!window.editorReady){setTimeout(b,100);return}d.remove();editorReady(f,a)};$(window).one("wmdloaded",b);d.addSpinner({"float":"right"});$("<script type='text/javascript' />").attr("src",e).appendTo("head")})}StackExchange.suggestedEdits=(function(){var c={};var i=function(j){return $(j).closest(".suggested-edit").attr("id").substring("suggested-edit-".length)};var a=function(j,k){var m=i(j);var l=j.closest("form");if(l.data("working")){return}l.data("working",true).find("input[type=button]").disable();j.addSpinnerAfter({padding:"0 3x"});$.ajax({url:"/suggested-edit/{editId}/vote/{type}".format({editId:m,type:k}),data:{fkey:StackExchange.options.user.fkey},dataType:"json",type:"POST",success:function(n){h(l,j,k,n)},error:function(n,o,p){d(l,j,"An error has occurred when trying to "+k+" - please try again")},complete:StackExchange.helpers.removeSpinner})};var h=function(j,k,l,m){if(!m.Success){d(j,k,m.Message);return}if(c.popup){if(l=="approve"){location.href=m.RedirectTo}$("#lightbox, #lightbox-panel").fadeOutAndRemove()}else{if(c.refreshPageOnActionSuccess){location.reload(true)}else{f(k,m.MiniHtml)}}};var f=function(k,j){k.closest(".suggested-edit").fadeOut("slow",function(){if(j){$(".suggested-edit:first").before(j).fadeIn("fast")}$(this).remove()});b()};var b=function(){$("#hlinks-nav .mod-flag-indicator.hotbg, #tabs .youarehere .mod-flag-indicator.hotbg").each(function(){var j=$(this);j.text((j.text()||0)-1);if(j.text()<1){j.hide()}})};var d=function(j,l,k){StackExchange.helpers.removeSpinner();j.find("input[type=button]").not(l).fadeOut("fast");l.fadeOut("fast",function(){if(!c.hideRefreshButton){$('<input type="button" class="refresh-button" onclick="location.reload(true)" value="Refresh Page" style="display:none">').appendTo(j).fadeIn("fast")}j.closest("table").find(".form-error").html(k).fadeIn("fast",function(){if(c.popup){var m=j.closest(".popup-suggested-edit");if(m.scrollTop()>0){m.scrollTop(m.find(".suggested-edit").height())}}})})};var e=function(j){c=j||{};$(".approve-edit").unbind("click").click(function(){a($(this),"approve");return false});$(".reject-edit").unbind("click").click(function(){a($(this),"reject");return false});$(".improve-edit").unbind("click").click(function(){window.window.location.href="/posts/"+$(this).closest(".suggested-edit").find(".post-id").text()+"/edit";return false});$(".suggested-edit .action:not(.link)").unbind("click").click(function(){var l=$(this);var m=l.hasClass("full-diff")?"full-diff":"full-html-diff";var k=l.closest(".suggested-edit").find(".body-diffs");k.find("table:visible").hide();k.find("."+m).show();l.siblings(".action.selected").removeClass("selected");l.addClass("selected");return false});StackExchange.vote.delete_init(function(k,n,m){if(m&&m.Success){f(k)}else{var l=(m&&m.Message)?m.Message:"A problem occurred during deletion";k.parent().showErrorPopup(l)}})};var g=function(k){if(k.data("working")){return}k.data("working",true).addSpinnerAfter({padding:"3px 0"});var j=k.parent();var l=k.attr("id").substring("edit-pending-".length);$.ajax({type:"GET",url:"/suggested-edits/popup/"+l,dataType:"html",success:function(n){var p=$('<div id="lightbox-panel" class="popup" style="display:block"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div><div class="popup-suggested-edit">'+n+"</div></div>");var m=$(window).height();var o=p.find(".popup-suggested-edit").css({"max-height":m-100});$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");p.appendTo(j).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()});e({popup:true})},error:function(m,o,n){j.showErrorPopup(m.responseText&&m.responseText.length<200?m.responseText:"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();k.removeData("working")}});return false};return{init:e,bindPopupLinks:function(){$("div.post-menu a[id^='edit-pending-']").unbind("click").click(function(){g($(this));return false})}}})();(function(a){a.fn.typeWatch=function(b){var e=a.extend({wait:750,callback:function(){},highlight:true,captureLength:2},b);function c(f,g){var h=a(f.el).val();if((h.length>e.captureLength&&h.toUpperCase()!=f.text)||(g&&h.length>e.captureLength)){f.text=h.toUpperCase();f.cb(h)}}function d(h){if(h.type.toUpperCase()=="TEXT"||h.nodeName.toUpperCase()=="TEXTAREA"){var f={timer:null,text:a(h).val().toUpperCase(),cb:e.callback,el:h,wait:e.wait};if(e.highlight){a(h).focus(function(){this.select()})}var g=function(l){var j=f.wait;var k=false;if(l.keyCode==13&&this.type.toUpperCase()=="TEXT"){j=1;k=true}var i=function(){c(f,k)};clearTimeout(f.timer);f.timer=setTimeout(i,j)};a(h).keydown(g)}}return this.each(function(f){d(this)})}})(jQuery);(function(f){var i,g;var c=0;var h=32;var b;f.fn.TextAreaResizer=function(){return this.each(function(){i=f(this).addClass("processed");g=null;f(this).parent().append(f('<div class="grippie"></div>').bind("mousedown",{el:this},j));var k=f("div.grippie",f(this).parent())[0];k.style.marginRight=(k.offsetWidth-f(this)[0].offsetWidth)+"px"})};function j(k){i=f(k.data.el);i.blur();c=d(k).y;g=i.height()-c;i.css("opacity",0.25);f(document).mousemove(e).mouseup(a);return false}function e(m){var k=d(m).y;var l=g+k;if(c>=(k)){l-=5}c=k;l=Math.max(h,l);i.height(l+"px");if(l<h){a(m)}return false}function a(k){f(document).unbind("mousemove",e).unbind("mouseup",a);i.css("opacity",1);i.focus();i=null;g=null;c=0}function d(k){return{x:k.clientX+document.documentElement.scrollLeft,y:k.clientY+document.documentElement.scrollTop}}})(jQuery);(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,e){d.fx.step[e]=function(g){if(!g.colorInit){g.start=c(g.elem,e);g.end=b(g.end);g.colorInit=true}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(e){var f;if(e&&e.constructor==Array&&e.length==3){return e}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e)){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(f=/rgba\(0, 0, 0, 0\)/.exec(e)){return a.transparent}return a[d.trim(e).toLowerCase()]}function c(g,f){var e;do{e=d.curCSS(g,f);if(e!=""&&e!="transparent"||d.nodeName(g,"body")){break}f="backgroundColor"}while(g=g.parentNode);return b(e)}var a={}})(jQuery);