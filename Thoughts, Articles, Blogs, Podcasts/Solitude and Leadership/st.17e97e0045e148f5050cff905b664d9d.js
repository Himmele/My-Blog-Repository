if(!window.console||!console.firebug){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}$JSON=new function(){this.encode=function(){var self=arguments.length?arguments[0]:this,result,tmp;if(self===null){result="null"}else{if(self!==undefined&&(tmp=$[typeof self](self))){switch(tmp){case Array:result=[];for(var i=0,j=0,k=self.length;j<k;j++){if(self[j]!==undefined&&(tmp=$JSON.encode(self[j]))){result[i++]=tmp}}result="[".concat(result.join(","),"]");break;case Boolean:result=String(self);break;case Date:result='"'.concat(self.getFullYear(),"-",d(self.getMonth()+1),"-",d(self.getDate()),"T",d(self.getHours()),":",d(self.getMinutes()),":",d(self.getSeconds()),'"');break;case Function:break;case Number:result=isFinite(self)?String(self):"null";break;case String:result='"'.concat(self.replace(rs,s).replace(ru,u),'"');break;default:var i=0,key;result=[];for(key in self){if(self[key]!==undefined&&(tmp=$JSON.encode(self[key]))){result[i++]='"'.concat(key.replace(rs,s).replace(ru,u),'":',tmp)}}result="{".concat(result.join(","),"}");break}}}return result};this.decode=function(input){var data=null;try{if(/^[\],:{}\s]*$/.test(input.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){data=window.JSON&&window.JSON.parse?window.JSON.parse(input):(new Function("return "+input))();return data}else{return null}}catch(err){}};var c={"\b":"b","\t":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\","/":"/"},d=function(n){return n<10?"0".concat(n):n},e=function(c,f,e){e=eval;delete eval;if(typeof eval==="undefined"){eval=e}f=eval(""+c);eval=e;return f},i=function(e,p,l){return 1*e.substr(p,l)},p=["","000","00","0",""],rc=null,rd=/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/,rs=/(\x5c|\x2F|\x22|[\x0c-\x0d]|[\x08-\x0a])/g,rt=/^([0-9]+|[0-9]+[,\.][0-9]{1,3})$/,ru=/([\x00-\x07]|\x0b|[\x0e-\x1f])/g,s=function(i,d){return"\\".concat(c[d])},u=function(i,d){var n=d.charCodeAt(0).toString(16);return"\\u".concat(p[n.length],n)},v=function(k,v){return $[typeof result](result)!==Function&&(v.hasOwnProperty?v.hasOwnProperty(k):v.constructor.prototype[k]!==v[k])},$={"boolean":function(){return Boolean},"function":function(){return Function},number:function(){return Number},object:function(o){return o instanceof o.constructor?o.constructor:null},string:function(){return String},"undefined":function(){return null}},$$=function(m){function $(c,t){t=c[m];delete c[m];try{e(c)}catch(z){c[m]=t;return 1}}return $(Array)&&$(Object)};try{rc=new RegExp('^("(\\\\.|[^"\\\\\\n\\r])*?"|[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t])+?$')}catch(z){rc=/^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/}};fragmentPump=new function(){this.fragTimer="";this.oldQS="";this.callBuffer=[];this.initRun=false;this.initialize=function(){this.fragTimer=setInterval("fragmentPump.checkFragment()",5)};this.startint=function(){setInterval(this.checkFragment.bind(this),250)};this.checkFragment=function(){var hash=document.location.hash.substring(1);if(hash.length>0&&hash!==this.oldQS){var args=hash.split("/");this.oldQS=hash;var cmd=args.shift();cmd="fragmentPump."+cmd;var temp="";if(true==/page=send/gi.test(hash)||true==/page-=-send/gi.test(hash)){showLoadingBox()}for(var i=0;i<args.length;i++){temp=temp+'"'+args[i]+'"';if(i<(args.length-1)){temp=temp+","}}var evStr=cmd+"("+temp+")";if(cmd=="fragmentPump.init"||cmd=="fragmentPump.test"||cmd=="fragmentPump.data"||cmd=="fragmentPump.show"||cmd=="fragmentPump.popup"||cmd=="fragmentPump.widget"||cmd=="fragmentPump.light"){var tempFun=eval("window."+cmd);if(tempFun){var tempFucn=new Function(evStr);tempFucn()}else{}}}};this.init=function(){if(this.initRun===false){this.initRun=true;for(var i=0;i<arguments.length;i++){var num=i+1;if(arguments[i]!=""&&arguments[i]!=" "){addToOptionsBuffer(arguments[i])}}if(widget.domReady===true){processBuffer()}this.initRun=true}};this.test=function(){readyTest()};this.data=function(){for(var i=0;i<arguments.length;i++){addToOptions2(arguments[i])}};this.show=function(){if(widget.chicklet_loaded==false){replaceClass("rpChicklet","ckimg");replaceClass("button_green_left_replace","button_green_left");replaceClass("button_green_right_replace","button_green_right");replaceClass("button_grey_left_replace","button_grey_left");replaceClass("button_grey_right_replace","button_grey_right");replaceClass("closeX_replace","closeX");replaceClass("close_button_replace","close_button");initWidget();checkLogin();widget.chicklet_loaded=true}if(this.initRun==false){return false}for(var i=0;i<arguments.length;i++){addToOptions(arguments[i])}return true};this.popup=function(){widget.popup=true;if(widget.chicklet_loaded==false){replaceClass("rpChicklet","ckimg");replaceClass("button_green_left_replace","button_green_left");replaceClass("button_green_right_replace","button_green_right");replaceClass("button_grey_left_replace","button_grey_left");replaceClass("button_grey_right_replace","button_grey_right");replaceClass("closeX_replace","closeX");replaceClass("close_button_replace","close_button");initWidget();checkLogin();widget.chicklet_loaded=true}clearInterval(fragmentPump.fragTimer);glo_options_popup=true;displayNum=24;for(var i=0;i<arguments.length;i++){var num=i+1;addToOptionsBuffer(arguments[i])}if(widget.domReady===true){processBuffer()}this.initRun=true};this.widget=function(){if(arguments.length){var kvPairs=arguments[0].split("=");for(var i=0;i<kvPairs.length;i+=2){switch(kvPairs[i]){case"screen":if(kvPairs[i+1]=="home"){showHome()}else{if(kvPairs[i+1]=="send"){showHome()}}break}}}};this.light=function(){if(widget.chicklet_loaded==false){replaceClass("rpChicklet","ckimg");replaceClass("button_green_left_replace","button_green_left");replaceClass("button_green_right_replace","button_green_right");replaceClass("button_grey_left_replace","button_grey_left");replaceClass("button_grey_right_replace","button_grey_right");replaceClass("closeX_replace","closeX");replaceClass("close_button_replace","close_button");initWidget();checkLogin();widget.chicklet_loaded=true}if(this.initRun==false){return false}for(var i=0;i<arguments.length;i++){addToOptionsLight(arguments[i])}createPreferenceServices();return true};this.initialize()};function addToOptionsBuffer(b){var c=[];c=b.split("=");c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1]);try{c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1])}catch(d){}tstArray.push(new fragObj(c[0],c[1]));bufferArgs.push(c[0]);bufferValue.push(c[1])}function checkBufferArg(b){var c=false;for(var a=0;a<bufferRunArgs.length;a++){if(bufferRunArgs[a]==b){c=true}}return c}function processBuffer(){bufferArgs.reverse();bufferValue.reverse();for(var a=0;a<bufferArgs.length;a++){if(checkBufferArg(bufferArgs[a])===false){bufferRunArgs.push(bufferArgs[a]);setGlobals(bufferArgs[a],bufferValue[a])}}createPreferenceServices()}function fragObj(a,b){this.frag=a;this.qs=b}function readyTest(){for(var b=0;b<tstArray.length;b++){var a=tstArray[b].frag+" = \n"+tstArray[b].qs;alert(a)}}function addToOptions(b){var c=[];c=b.split("=");c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1]);try{c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1])}catch(d){}tstArray.push(new fragObj(c[0],c[1]));setGlobals(c[0],c[1])}function addToOptionsLight(b){var c=[];c=b.split("-=-");c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1]);try{c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1])}catch(d){}tstArray.push(new fragObj(c[0],c[1]));setGlobals(c[0],c[1])}function addToOptions2(b){var c=[];c=b.split("=");c[0]=decodeURIComponent(c[0]);try{c[0]=decodeURIComponent(c[0]);c[1]=decodeURIComponent(c[1])}catch(d){}if(c[0]=="pageHost"){setGlobals("hostname",c[1])}else{if(c[0]=="pagePath"){setGlobals("location",c[1])}}tstArray.push(new fragObj(c[0],c[1]));if(c[1]=="done"){if(fragmentPump.initRun===false){document.location.hash=glo_initFrag}glo_jsonStr=glo_jsonArray.join("");glo_jsonArray=[];processFrag()}else{if(c[0]=="jsonData"){glo_jsonArray.push(c[1])}}}function processFrag(){try{glo_jsonStr=decodeURIComponent(glo_jsonStr)}catch(c){}var b=glo_jsonStr;var d=[];try{d=$JSON.decode(b);if(d==null){b=decodeURIComponent(b);d=$JSON.decode(b)}}catch(c){b=decodeURIComponent(b);d=$JSON.decode(b)}if(d&&d.length){for(var a=0;a<d.length;a++){setGlobals("title",d[a].title);setGlobals("type",d[a].type);setGlobals("summary",d[a].summary);setGlobals("content",d[a].content);setGlobals("url",d[a].url);setGlobals("icon",d[a].icon);setGlobals("category",d[a].category);setGlobals("updated",d[a].updated);setGlobals("published",d[a].published);setGlobals("author",d[a].author);setGlobals("thumb",d[a].icon);if(d[a].tags){setGlobals("glo_tags_array",d[a].tags)}if(d[a].description){setGlobals("glo_description_array",d[a].description)}}}createPreferenceServices()}var tstArray=[];var domReady=false;var bufferArgs=[];var bufferValue=[];var bufferRunArgs=[];var glo_jsonArray=[];var glo_jsonStr="";function setGlobals(e,h){try{h=decodeURIComponent(h)}catch(g){}try{h=decodeURIComponent(h)}catch(g){}if(h=="true"){h=true}else{if(h=="false"){h=false}}switch(e){case"url":widget.URL=h;if(widget.popup==true){initWidget()}var c=extractDomainFromURL(h);if(c==null){c=widget.URL}else{if(widget.hostname==null){widget.hostname=c}}document.getElementById("footer_link_a").setAttribute("href","http://sharethis.com/stream?src="+encodeURIComponent(c));widget.sharURL=h;break;case"title":widget.title=h;break;case"pUrl":if(widget.popup!=true||widget.URL==null){widget.URL=h;var c=extractDomainFromURL(h);if(c==null){c=h}else{if(widget.hostname==null){widget.hostname=c}}document.getElementById("footer_link_a").setAttribute("href","http://sharethis.com/stream?src="+encodeURIComponent(c))}break;case"fpc":widget.fpc=h;break;case"sessionID":widget.sessionID=h;break;case"publisher":widget.publisher=h;break;case"type":widget.type=h;break;case"summary":widget.summary=h;break;case"content":widget.content=h;break;case"icon":widget.icon=h;break;case"image":widget.thumb=h;break;case"category":widget.category=h;break;case"updated":widget.updated=h;break;case"author":widget.author=h;break;case"published":widget.published=h;break;case"thumb":widget.thumb=h;break;case"hostname":widget.hostname=h;break;case"location":widget.location=h;break;case"guid_index":widget.guid_index=h;break;case"page":widget.page=h;if(h&&h=="send"){getEmailService()}else{if(h&&h=="home"){showHome()}}break;case"toolbar":widget.toolbar=h;break;case"services":widget.services=h;break;case"headerTitle":if(h.length>0){var d=document.getElementById("header_div");var f=document.getElementById("header_title").innerHTML=h;d.style.display="block"}break;case"headerfg":var d=document.getElementById("header_div");d.style.color=h;break;case"headerbg":var d=document.getElementById("header_div");d.style.backgroundColor=h;break;case"tracking":widget.tracking=true;if(widget.domReady==true){getPubGA()}break;case"linkfg":widget.linkfg=h;break;case"tabs":var b=new RegExp(/email|send/);if(b.test(h)==false){widget.email_service=false}if(b.test(h)==false){widget.sms_service=false}break;case"send_services":var b=new RegExp(/email/);if(b.test(h)==false){widget.email_service=false}b=new RegExp(/sms/);if(b.test(h)==false){widget.sms_service=false}break;case"exclusive_services":widget.merge_list=false;break;case"post_services":if(widget.services==null){widget.services=h}else{widget.service+=h}break;case"stLight":widget.stLight=true;break;case"doneScreen":widget.doneScreen=h;break;case"embeds":case"button":case"type":case"inactivefg":case"inactivebf":case"headerbg":case"style":case"charset":case"hash_flag":case"onmouseover":case"inactivebg":case"send_services":case"buttonText":case"offsetLeft":case"offsetTop":case"buttonText":break;default:break}}var widget=new function(){this.URL=null;this.title=null;this.sessionID=null;this.fpc=null;this.publisher=null;this.browser=null;this.services=[];this.publisher=null;this.icon;this.content;this.guid;this.guid_index;this.published;this.author;this.updated;this.summary;this.thumb;this.tags;this.hostname;this.location;this.headerTitle;this.headerfg;this.page;this.purl;this.all_services={aim:{title:"AIM Share"},sms:{title:"Text",type:"sms"},email:{title:"Email"},bebo:{title:"Bebo"},blinklist:{title:"Blinklist"},blogmarks:{title:"Blogmarks"},blogger:{title:"Blogger",type:"post"},bus_exchange:{title:"Add to BX",aTitle:"Business Exchange"},ybuzz:{title:"Buzz Up!"},care2:{title:"Care2"},current:{title:"Current"},dealsplus:{title:"Dealspl.us"},delicious:{title:"Delicious"},digg:{title:"Digg"},diigo:{title:"Diigo"},facebook:{title:"Facebook"},fark:{title:"Fark"},faves:{title:"Faves"},fresqui:{title:"Fresqui"},friendfeed:{title:"FriendFeed"},funp:{title:"Funp"},google_bmarks:{title:"G Bookmarks"},gbuzz:{title:"Google Buzz"},kirtsy:{title:"Kirtsy"},linkedin:{title:"LinkedIn"},livejournal:{title:"LiveJournal",type:"post"},meneame:{title:"Meneame"},messenger:{title:"Messenger"},mister_wong:{title:"Mr Wong"},mixx:{title:"Mixx"},myspace:{title:"MySpace"},n4g:{title:"N4G"},newsvine:{title:"Newsvine"},oknotizie:{title:"Oknotizie"},propeller:{title:"Propeller"},reddit:{title:"Reddit"},slashdot:{title:"Slashdot"},sonico:{title:"Sonico"},simpy:{title:"Simpy"},sphinn:{title:"Sphinn"},stumbleupon:{title:"Stumbleupon"},technorati:{title:"Technorati",dontUseEncodedURL:"Encoded URLs are not allowed"},twackle:{title:"Twackle"},twitter:{title:"Twitter"},typepad:{title:"TypePad",type:"post"},tumblr:{title:"Tumblr"},wordpress:{title:"WordPress",type:"post"},xanga:{title:"Xanga"},yahoo_bmarks:{title:"Y! Bookmarks"},yigg:{title:"Yigg"}};this.top_services="email,facebook,twitter,gbuzz";this.exclusive_services=null;this.services="blogger,myspace,digg,aim,stumbleupon,messenger";this.sharebox={title:"Save",type:"sharebox"};this.displayServices=[];this.topDisplayServices=[];this.chickletNumber=6;this.domReady=false;this.guid_index=0;this.page="home";this.toolbar=false;this.loginPoller=null;this.importPoller=null;this.metaInfo=null;this.mainCssLoaded=false;this.toolbar=false;this.pageTracker=null;this.pubTracker=null;this.tracking=false;this.lastURL=null;this.sharURL=null;this.poster=null;this.linkfg=null;this.email_service=true;this.sms_service=true;this.merge_list=true;this.chicklet_loaded=false;this.segmentframe=null;this.segmentRun=false;this.ga=null;this.popup=false;this.cssInterval=null;this.stLight=false;this.optout=false;this.doneScreen=true};var user=new function(){this.name=null;this.email=null;this.nickname=null;this.recents=null;this.chicklets=null;this.display=null;this.type=null;this.token=null;this.contacts=[];this.loggedIn=false;this.user_services=null;this.currentUserType=null;this.ThirdPartyUsers=null};function getServiceLink(b){if((widget.all_services[b]==undefined&&b!=="sharebox")||(widget.email_service==false&&b=="email")||(widget.sms_service==false&&b=="sms")){var c=document.createElement("a");return c}var e=" rpChicklet";if(widget.chicklet_loaded==true){e=" ckimg"}if(b=="email"){var c=document.createElement("a");c.className=b;c.className+=e;c.setAttribute("title",widget.all_services[b].title);c.setAttribute("id","post_"+b+"_link");if(c.attachEvent){c.attachEvent("onclick",function(){getEmailService()})}else{c.setAttribute("onclick","getEmailService();")}c.setAttribute("href","javascript:void(0);");c.appendChild(document.createTextNode(widget.all_services[b].title));if(widget.linkfg!=null){c.style.color=widget.linkfg}return c}else{if(b=="sharebox"){var c=document.createElement("a");c.className=b;c.className+=e;c.setAttribute("title",widget.sharebox.title);c.setAttribute("id","post_"+b+"_link");c.setAttribute("href","javascript:void(0);");c.appendChild(document.createTextNode(widget.sharebox.title));if(widget.linkfg!=null){c.style.color=widget.linkfg}return c}else{if(b=="twitter"&&user.ThirdPartyUsers&&user.ThirdPartyUsers.twitter){var c=document.createElement("a");c.className=b;c.className+=e;c.setAttribute("title",widget.all_services[b].title);c.setAttribute("id","post_"+b+"_link");if(c.attachEvent){c.attachEvent("onclick",function(){createPoster("twitter")})}else{c.setAttribute("onclick",'createPoster("twitter")')}c.setAttribute("href","javascript:void(0);");c.appendChild(document.createTextNode(widget.all_services[b].title));if(widget.linkfg!=null){c.style.color=widget.linkfg}return c}else{if(b=="wordpress"){var c=document.createElement("a");c.className=b;c.className+=e;c.setAttribute("title",widget.all_services[b].title);c.setAttribute("id","post_"+b+"_link");if(c.attachEvent){c.attachEvent("onclick",function(){createPoster("wordpress")})}else{c.setAttribute("onclick",'createPoster("wordpress")')}c.setAttribute("href","javascript:void(0);");c.appendChild(document.createTextNode(widget.all_services[b].title));if(widget.linkfg!=null){c.style.color=widget.linkfg}return c}else{if(b=="sms"){var c=document.createElement("a");c.className=b;c.className+=e;c.setAttribute("title",widget.all_services[b].title);c.setAttribute("id","post_"+b+"_link");if(c.attachEvent){c.attachEvent("onclick",function(){getEmailService("sms")})}else{c.setAttribute("onclick",'getEmailService("sms")')}c.setAttribute("href","javascript:void(0);");c.appendChild(document.createTextNode(widget.all_services[b].title));if(widget.linkfg!=null){c.style.color=widget.linkfg}return c}else{var f="chicklet";var d=(("https:"==document.location.protocol)?"https://ws.":"http://wd.")+"sharethis.com/api/sharer.php?destination={destination}&url={url}&title={title}&publisher={publisher}&fpc={fpc}&sessionID={sessionID}&source="+f;d=d.replace("{destination}",b);d=d.replace("{url}",encodeURIComponent(widget.URL));d=d.replace("{title}",encodeURIComponent(widget.title));d=d.replace("{publisher}",widget.publisher);d=d.replace("{fpc}",widget.fpc);d=d.replace("{sessionID}",widget.sessionID);var c=document.createElement("a");c.className=b;c.className+=e;c.setAttribute("href",d);c.setAttribute("title",widget.all_services[b].title);c.setAttribute("id","post_"+b+"_link");c.setAttribute("target","_blank");c.setAttribute("stservice",b);if(c.attachEvent){c.attachEvent("onclick",function(){serviceClicked(c)})}else{c.setAttribute("onclick","serviceClicked(this);")}c.appendChild(document.createTextNode(widget.all_services[b].title));if(widget.linkfg!=null){c.style.color=widget.linkfg}return c}}}}}}function getEmailService(a){if(a=="sms"){widget.poster="sms";updateServiceCount("sms");gaLog("Chicklet","Sms");shareLog("Sms")}else{gaLog("Chicklet","Email");shareLog("Email");widget.poster=null;updateServiceCount("email")}if(typeof(email)=="undefined"){odjs((("https:"==document.location.protocol)?"https://ws.sharethis.com/secure/js/email.7ee55d5fcd7281137d065dad24138fd2.js":"http://w.sharethis.com/share4x/js/email.7ee55d5fcd7281137d065dad24138fd2.js"),function(){});document.getElementById("main").style.display="none";document.getElementById("email_main").style.display="block";showLoadingBox()}else{document.getElementById("main").style.display="none";document.getElementById("email_main").style.display="block";hideLoadingBox();email.reClicked();if(widget.poster=="sms"){document.getElementById("heading_div").firstChild.innerHTML=lang.strings.msg_text}else{document.getElementById("heading_div").firstChild.innerHTML=lang.strings.msg_email}}}function emailServiceCallback(){if(widget.poster=="sms"){document.getElementById("heading_div").firstChild.innerHTML=lang.strings.msg_text}else{document.getElementById("heading_div").firstChild.innerHTML=lang.strings.msg_email}hideLoadingBox();document.getElementById("email_main").style.display="block";document.getElementById("txtYourAddr").focus();if(user.email==null){document.getElementById("from_div").style.display="block"}else{if(user.email.length<2){document.getElementById("from_div").style.display="block"}else{document.getElementById("from_div").style.display="none"}}}function showLoadingBox(a){if(a){document.getElementById("loading").innerHTML=a}document.getElementById("loading_img").innerHTML='<img src="/images/spinner.gif" alt="'+lang.strings.msg_loading+'">';document.getElementById("loading_box").style.display="block";document.getElementById("main").style.display="none";document.getElementById("email_main").style.display="none";document.getElementById("poster_main").style.display="none"}function hideLoadingBox(){document.getElementById("loading_box").style.display="none"}function processExclusiveServices(){if(widget.merge_list==true){return true}widget.top_services="";var d=widget.services.split(",");var a=[];for(var c=0;c<d.length&&c<4;c++){a.push(d[c])}widget.top_services=a.join(",");var b=document.getElementById("pref_chicklets");b.style.height="auto"}function createTopServices(){var d;var c=document.getElementById("top_chicklets");this.services={abc:false};while(c.childNodes.length>=1){c.removeChild(c.firstChild)}var f=0;var a=widget.top_services.split(",");var g=widget.services.split(",");if(user.user_services!==null){var e=user.user_services.split(",");for(var b=0;b<e.length;b++){if(f<4){if(typeof(this.services[e[b]])=="undefined"){d=getServiceLink(e[b]);if(d!=null){c.appendChild(d);widget.topDisplayServices.push(e[b]);f++;this.services[e[b]]=true}}}else{addToDisplayList(e[b])}}}for(var b=0;b<a.length;b++){if(f<4){if(typeof(this.services[a[b]])=="undefined"){d=getServiceLink(a[b]);if(d!=null){c.appendChild(d);widget.topDisplayServices.push(a[b]);f++;this.services[a[b]]=true}}}else{addToDisplayList(a[b])}}}function createPreferenceServices(){processExclusiveServices();user.user_services=extractServicesFromCookie();createTopServices();if(widget.services!==null){var a=widget.services.split(",");for(var b=0;b<a.length;b++){addToDisplayList(a[b])}}if(widget.merge_list==true){for(var b in widget.all_services){addToDisplayList(b)}}showDisplayList()}function addToDisplayList(a){var c=false;var b=widget.top_services.split(",");if(a=="email"&&widget.email_service==false){return true}if(a=="sms"&&widget.sms_service==false){return true}if(widget.displayServices.length>=widget.chickletNumber){return true}for(var d=0;d<widget.displayServices.length;d++){if(a==widget.displayServices[d]){c=true}}for(var d=0;d<widget.topDisplayServices.length;d++){if(a==widget.topDisplayServices[d]){c=true}}if(user.user_services!==null){var e=user.user_services.split(",");for(var d=0;d<e.length;d++){if(a==e[d]){c=true}}}if(c==false){widget.displayServices.push(a)}}function showDisplayList(){var c;var b=document.getElementById("pref_chicklets");while(b.childNodes.length>=1){b.removeChild(b.firstChild)}for(var a=0;a<widget.displayServices.length;a++){c=getServiceLink(widget.displayServices[a]);if(c!=null&&c.className!==""){b.appendChild(c)}}widget.displayServices=[];widget.topDisplayServices=[]}function searchFocus(){var a=document.getElementById("chicklet_search_field");if(a.value==lang.strings.msg_search_services){a.value=""}gaLog("Search","focus")}function searchBlur(){var a=document.getElementById("chicklet_search_field");if(a.value==""){a.value=lang.strings.msg_search_services}}function searchAndDisplay(a){var d;var c=document.getElementById("chicklets");while(c.childNodes.length>=1){c.removeChild(c.firstChild)}if(a==null||a==""){document.getElementById("view_all").style.display="inline";document.getElementById("hide_all").style.display="none";document.getElementById("chicklets").style.display="none";return true}if(a=="all"){for(var b in widget.all_services){if(b!=="sharebox"){d=getServiceLink(b);if(d!=null){c.appendChild(d)}}}widget.lastSearchTerm="all";return true}document.getElementById("view_all").style.display="none";document.getElementById("hide_all").style.display="inline";document.getElementById("chicklets").style.display="block";try{var e=new RegExp(a,"gi")}catch(f){return false}for(var b in widget.all_services){var g=widget.all_services[b].title;if(e.test(g)==true&&b!="sharebox"){d=getServiceLink(b);if(d!=null){c.appendChild(d)}}else{if(e.test(g)==true&&b!="sharebox"){d=getServiceLink(b);if(d!=null){c.appendChild(d)}}else{if(e.test(g)==true){}}}}widget.lastSearchTerm=a;return true}function showAll(){searchAndDisplay("all");document.getElementById("view_all").style.display="none";document.getElementById("hide_all").style.display="inline";document.getElementById("chicklets").style.display="block";gaLog("Widget","show_all")}function hideAll(){document.getElementById("hide_all").style.display="none";document.getElementById("view_all").style.display="inline";document.getElementById("chicklets").style.display="none";gaLog("Widget","hide_all")}function extractServicesFromCookie(){var b=$JSON.decode(cookie.getCookie("ServiceHistory"));var d=[];var c=null;for(o in b){d.push(b[o])}d.sort(serviceSort);if(d.length>0){c=""}for(var a=0;a<d.length;a++){if(a<d.length-1){c+=d[a].service+","}else{c+=d[a].service}}return c}function serviceClicked(b){var a=b.getAttribute("stservice");updateServiceCount(a);gaLog("Share",a);showDoneScreen();shareLog(a);document.getElementById("msg_share_success").style.visibility="hidden"}function updateServiceCount(a){if(widget.all_services[a]==undefined||a=="sharebox"){return false}var c=$JSON.decode(cookie.getCookie("ServiceHistory"));if(c==false||c==null||c.length<1){c={};c[a]={};c[a].service=a;c[a].count=1;cookie.setCookie("ServiceHistory",$JSON.encode(c));return true}var e={};var d=null;var b=false;for(o in c){if(c[o].service==a){c[o].count++;b=true}}if(b==false){c[a]={};c[a].service=a;c[a].count=1}cookie.setCookie("ServiceHistory",$JSON.encode(c));return true}function serviceSort(d,c){if(d.count==c.count){return 0}else{if(d.count>c.count){return -1}else{return 1}}}function signIn(){window.open("http://sharethis.com/account/signin-widget","LoginWindow","status=1, height=700, width=970, resizable=0");clearInterval(widget.loginPoller);widget.loginPoller=setInterval(function(){checkForLoginCookie()},1000);gaLog("SignIn","Click")}function signOut(){if(typeof(window.localStorage)!=="undefined"){window.localStorage.clear()}gaLog("SignOut","Click");cookie.deleteCookie("ShareUT");cookie.deleteCookie("recents");forgetUser();if(typeof(email)!=="undefined"){email.display=[];email.selected=[];document.getElementById("recents").style.display="none"}document.getElementById("signIn").style.display="block";document.getElementById("footer_email").style.display="none";document.getElementById("footer_info").style.display="none";createPreferenceServices()}function forgetUser(){user.name=null;user.email=null;user.nickname=null;user.recents=null;user.chicklets=null;user.display=null;user.type=null;user.token=null;user.contacts=[];user.loggedIn=false;user.user_services=null;user.currentUserType=null;user.ThirdPartyUsers=null;if(user.email==null&&typeof(email)!=="undefined"){document.getElementById("from_div").style.display="block"}}function checkLogin(){if(cookie.getCookie("ShareUT")!==false){var a=["return=json","cb=loginOnSuccess","service=getUserInfo"];a=a.join("&");jsonp.makeRequest("http://wd.sharethis.com/api/getApi.php?"+a)}}function loginOnSuccess(b){gaLog("SignIn","Complete");if(b&&b.status=="SUCCESS"){user.email=b.data.email;user.name=b.data.name;user.nickname=b.data.nickname;user.recents=b.data.recipients;if(user.recents!==null){cookie.setCookie("recents",$JSON.encode(user.recents))}user.display=user.email;user.currentUserType=b.data.CurrentUserType;user.ThirdPartyUsers=b.data.ThirdPartyUsers;if(b.data.CurrentUserType&&b.data.ThirdPartyUsers){if(user.name!==null){user.display="<span class='"+b.data.CurrentUserType+" ckimg'>"+user.name+"</span>"}else{user.display="<span class='"+b.data.CurrentUserType+" ckimg'>"+b.data.ThirdPartyUsers[b.data.CurrentUserType]+"</span>"}}if(typeof(window.localStorage)!=="undefined"){var c=cookie.getCookie("ShareUT");var d=window.localStorage;if(user.email!=null){d.email=user.email}if(user.name!=null){d.name=user.name}if(user.nickname!=null){d.nickname=user.nickname}if(user.currentUserType!=null){d.currentUserType=user.currentUserType}if(user.ThirdPartyUsers!=null){d.ThirdPartyUsers=user.ThirdPartyUsers}var a=user.display;if(a!=null){a=a.replace(/ckimg/gi,"rpChicklet");d.display=a}}if(typeof(email)!=="undefined"){document.getElementById("from_div").style.display="none";email.getContacts();email.showRecents()}}document.getElementById("signIn").style.display="none";if(user.display!==null){document.getElementById("footer_email").innerHTML=user.display}document.getElementById("footer_email").style.display="block";document.getElementById("footer_info").style.display="block"}function checkForLoginCookie(){var a=cookie.getCookie("ShareUT");if(a){clearInterval(widget.loginPoller);checkLogin();clearInterval(widget.loginPoller)}}function checkForImportCookie(){var a=cookie.getCookie("StImported");var b=cookie.getCookie("ShareUT");if(b&&a){clearInterval(widget.importPoller);checkLogin();if(email){email.getContacts()}clearInterval(widget.importPoller)}}function getMainCss(){if(widget.mainCssLoaded==false){odcss((("https:"==document.location.protocol)?"https://ws.sharethis.com/secure/css/share.2832ecdcaf93be3bf761e0c3503f97af.css":"http://w.sharethis.com/share4x/css/share.2832ecdcaf93be3bf761e0c3503f97af.css"),function(){},true);widget.mainCssLoaded=true}else{return false}}function showModal(c){document.getElementById("modal_box").style.display="block";document.getElementById("modal_box").style.border="1px solid gray";document.getElementById("modal_text").innerHTML=c;var a=document.getElementById("outercontainer").offsetHeight;var b=document.getElementById("outercontainer").offsetWidth;document.getElementById("modal_box").style.height=a+"px";document.getElementById("modal_box").style.width=(b-2)+"px"}function clearModal(){document.getElementById("modal_box").style.display="none"}function extractDomainFromURL(b,a){try{var d=b.replace(/(\w+):\/\/([^\/:]+)(:\d*)?([^# ]*)/,"$2");if(!a&&d.toLowerCase().indexOf("www.")==0){d=d.substring(4)}d=d.replace(/#.*?$/,"");return d}catch(c){return null}}function initWidget(){if(widget.URL==null){return true}else{var a=["return=json","url="+encodeURIComponent(widget.URL),"fpc="+widget.fpc,"cb=initWidgetOnSuccess","service=initWidget"];a=a.join("&");jsonp.makeRequest("http://wd.sharethis.com/api/getApi.php?"+a);return true}}function initWidgetOnSuccess(a){widget.metaInfo=a.data;replaceClass("rpChicklet","ckimg");replaceClass("button_green_left_replace","button_green_left");replaceClass("button_green_right_replace","button_green_right");replaceClass("button_grey_left_replace","button_grey_left");replaceClass("button_grey_right_replace","button_grey_right");replaceClass("closeX_replace","closeX");replaceClass("close_button_replace","close_button");if(a.data&&a.data.ga&&a.data.ga==true){initGA();if(typeof(email)!="undefined"){email.reClicked()}}}var jsonp={};jsonp.makeRequest=function(a){odjs(a,function(){})};var ajax={request:null,defaultResponse:{status:"FAILURE"}};ajax.makeRequest=function(a,b,f,j,c){try{var e=new XMLHttpRequest()}catch(h){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(k){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(g){e=false}}}try{e.open(a,b,true);e.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=utf-8");e.setRequestHeader("Content-length",f.length);e.setRequestHeader("Connection","close");e.onreadystatechange=function(){if(e.readyState==4){if(e.status!=200){j(ajax.defaultResponse);return true}if(e.responseText.length==0){j(ajax.defaultResponse);return true}var l=null;if(/^[\],:{}\s]*$/.test(e.responseText.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){l=window.JSON&&window.JSON.parse?window.JSON.parse(e.responseText):(new Function("return "+e.responseText))()}else{}j(l)}};e.send(f)}catch(d){console.log(d)}};var cookie=new function(){this.setCookie=function(c,e){var d=new Date;var g=d.getFullYear();var h=d.getMonth()+2;var f=d.getDate();var b=c+"="+escape(e);if(g){var a=new Date(g,h,f);b+="; expires="+a.toGMTString()}b+="; domain="+escape(".sharethis.com")+";path=/";document.cookie=b};this.getCookie=function(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");if(a){return(unescape(a[2]))}else{return false}};this.deleteCookie=function(a){var c="/";var b=".sharethis.com";document.cookie=a+"="+((c)?";path="+c:"")+((b)?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};function odjs(a,b){this.head=document.getElementsByTagName("head")[0];this.scriptSrc=a;this.script=document.createElement("script");this.script.setAttribute("type","text/javascript");this.script.setAttribute("src",this.scriptSrc);this.script.onload=b;this.script.onreadystatechange=function(){if(this.readyState=="loaded"){b()}};this.head.appendChild(this.script)}function odcss(a,b){this.head=document.getElementsByTagName("head")[0];this.scriptSrc=a;this.css=document.createElement("link");this.css.setAttribute("rel","stylesheet");this.css.setAttribute("type","text/css");this.css.setAttribute("href",a);this.css.setAttribute("id",a);setTimeout(function(){b()},500);this.head.appendChild(this.css);widget.cssInterval=setInterval(function(){if(document.getElementById(a)){clearInterval(widget.cssInterval);b();document.getElementsByTagName("body")[0].style.display="block"}},100)}try{widget.segmentframe=document.createElement('<iframe name="stframe" allowTransparency="true" style="body{background:transparent;}" ></iframe>')}catch(err){widget.segmentframe=document.createElement("iframe")}widget.segmentframe.id="stSegmentFrame";widget.segmentframe.name="stSegmentFrame";function initialize(){var h=false;var k=navigator.userAgent;var e=/bot|gomez|keynote/gi;if(k&&k!==null&&k.length>4){var m=k.match(e);if(m&&m!==null&&m.length>0){h=true}}else{h=true}if(fragmentPump.initRun==true){processBuffer()}if(widget.segmentRun==false&&h==false&&widget.stLight==false){var j=/fpc=.*?\//gi;var n="";n=glo_initFrag.match(j);if(n!==null){n=n[0];n=n.replace("/","");var c=document.getElementById("segmentDiv");var l=(("https:"==document.location.protocol)?"https://ws.":"http://wd.")+"sharethis.com/api/getSegment.php?"+n;widget.segmentframe.src=l;c.appendChild(widget.segmentframe);widget.segmentRun=true}}getMainCss();widget.domReady=true;createPreferenceServices();document.getElementById("chicklet_search_field").value=lang.strings.msg_search_services;document.getElementById("chicklet_search_field").onfocus=function(){searchFocus()};document.getElementById("chicklet_search_field").onblur=function(){searchBlur()};document.getElementById("signIn").onclick=function(){signIn()};document.getElementById("signOut").onclick=function(){signOut()};document.getElementById("modal_button").onclick=function(){clearModal()};if(widget.tracking==true){getPubGA()}document.getElementById("popular").innerHTML=lang.strings.msg_share;document.getElementById("msg_view_all").innerHTML=lang.strings.msg_view_all;document.getElementById("msg_hide_all").innerHTML=lang.strings.msg_hide_all;document.getElementById("msg_share_success").innerHTML=lang.strings.msg_share_success;document.getElementById("msgstr_btn_send").innerHTML=lang.strings.msg_share_again;document.getElementById("relatedText").innerHTML=lang.strings.msg_related_shares;document.getElementById("msg_post_to").innerHTML=lang.strings.msg_post_to;document.getElementById("poster_message").innerHTML=lang.strings.msg_message;document.getElementById("poster_message2").innerHTML=lang.strings.msg_blog_url;document.getElementById("msg_submit").innerHTML=lang.strings.msg_submit;document.getElementById("footer_link_a").innerHTML=lang.strings.msg_friends;document.getElementById("msg_my_acct").innerHTML=lang.strings.msg_my_acct;document.getElementById("signIn_text").innerHTML=lang.strings.msg_signin;document.getElementById("signOut").innerHTML=lang.strings.msg_signout;if(cookie.getCookie("ShareUT")!==false){if(typeof(window.localStorage)!=="undefined"){var d=cookie.getCookie("ShareUT");var g=window.localStorage;if(typeof(g.email)!="undefined"){user.email=g.email}if(typeof(g.name)!="undefined"){user.name=g.name}if(typeof(g.nickname)!="undefined"){user.nickname=g.nickname}if(typeof(g.display)!="undefined"){user.display=g.display}if(typeof(g.currentUserType)!="undefined"){user.currentUserType=g.currentUserType}if(typeof(g.ThirdPartyUsers)!="undefined"){user.ThirdPartyUsers=g.ThirdPartyUsers}document.getElementById("signIn").style.display="none";if(user.display!==null){document.getElementById("footer_email").innerHTML=user.display}document.getElementById("footer_email").style.display="block";document.getElementById("footer_info").style.display="block"}}if(cookie.getCookie("st_optout")!==false){var p=document.cookie;p=p.split(";");for(var f=0;f<p.length;f++){var n=p[f];n=n.split("=");if("st_optout"!=n[0]){cookie.deleteCookie(n[0])}}widget.optout=true;widget.fpc="optout"}processExclusiveServices()}if(typeof(window.addEventListener)!="undefined"){window.addEventListener("load",initialize,false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("load",initialize,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",initialize)}}}function removeClass(a,b){var c=document.getElementById(a);c.className=c.className.replace(b,"")}function addClass(a,b){var c=document.getElementById(a);c.className+=" "+b}function replaceClass(a,e){var d=document.getElementsByTagName("*");var c=new RegExp(a,"ig");for(var b=0;b<d.length;b++){if(c.test(d[b].className)){d[b].className=d[b].className.replace(c,e)}else{if(c.test(d[b].className)){d[b].className=d[b].className.replace(c,e)}else{if(c.test(d[b].className)){d[b].className=d[b].className.replace(c,e)}}}}}function getRelatedShares(a){if(widget.doneScreen==false||a==null){document.getElementById("doneScreenContent").style.display="none";document.getElementById("msg_share_success").setAttribute("style","margin-top:40px;");return false}var e="";try{if(/(.*:\/\/)(.*?)(\/.*$)/.test(a)==true){var b=new RegExp(/(.*:\/\/)(.*?)(\/.*$)/);e=a.replace(b,"$2");e=encodeURIComponent(e)}else{var b=new RegExp(/(.*:\/\/)(.*?)/);e=a.replace(b,"$2");e=encodeURIComponent(e)}}catch(c){}var d=["domain="+e,"return=json","url_limit=3","cb=getRelateShares_onSuccess","service=getLiveStream"];d=d.join("&");jsonp.makeRequest("http://wd.sharethis.com/api/getApi.php?"+d)}function getRelateShares_onSuccess(f){var g=document.getElementById("relatedShares");while(g.childNodes.length>=1){g.removeChild(g.firstChild)}var j=document.createElement("div");j.className="clear";if(f&&f.urls&&f.url_count>0){for(var h=0;h<f.urls.length&&h<3;h++){var d=document.createElement("div");if(f.urls[h].img!=""){d.className="relatedShare hasImage";var m="";if(typeof(f.urls[h].imagehash)!=="undefined"){m="http://img.sharethis.com.s3.amazonaws.com/"+f.urls[h].imagehash+"/100_100.jpg"}else{if(f.urls[h].img.search(/http:/)!=-1){m=f.urls[h].img}else{if(f.urls[h].img=="f5cdf97c374b31675d43285b73db4deb"){m="http://sharethis.com/share/thumb?url="+encodeURIComponent(f.urls[h].url)}}}var l=document.createElement("div");l.className="relatedImg";var e=document.createElement("img");e.setAttribute("stlink",f.urls[h].url);if(e.attachEvent){e.onclick=function(){gaLog("DoneScreen","ImgLinkClick");window.open(this.getAttribute("stlink"),"external","resizable=1,location=1,status=1,scrollbars=1,toolbar=1")}}else{e.setAttribute("onclick","gaLog('DoneScreen','ImgLinkClick');window.open('"+f.urls[h].url+"','external','resizable=1,location=1,status=1,scrollbars=1,toolbar=1');")}e.setAttribute("src",m);l.appendChild(e);d.appendChild(l)}else{d.className="relatedShare"}var c=document.createElement("div");c.className="relatedDetails";var b=document.createElement("span");b.className="relatedTitle link";b.setAttribute("stlink",f.urls[h].url);if(b.attachEvent){b.onclick=function(){gaLog("DoneScreen","TitleLinkClick");window.open(this.getAttribute("stlink"),"external","resizable=1,location=1,status=1,scrollbars=1,toolbar=1")}}else{b.setAttribute("onclick","gaLog('DoneScreen','TitleLinkClick');window.open('"+f.urls[h].url+"','external','resizable=1,location=1,status=1,scrollbars=1,toolbar=1');")}b.setAttribute("title",f.urls[h].title);b.innerHTML=f.urls[h].title;c.appendChild(b);var a=document.createElement("span");a.className="relatedSource";a.appendChild(document.createTextNode(f.urls[h].domain));c.appendChild(a);var k=document.createElement("span");k.className="relatedShareCount";k.appendChild(document.createTextNode(f.urls[h].shares+" share"+((f.urls[h].shares==1)?"":"s")));c.appendChild(k);d.appendChild(c);var j=document.createElement("div");j.className="clear";d.appendChild(j);g.appendChild(d)}}else{var d=document.createElement("div");document.getElementById("relatedText").style.display="none";var m=(("https:"==document.location.protocol)?"http://ws.sharethis.com/secure/images/bullet_2.gif":"http://w.sharethis.com/share4x/images/bullet_2.gif");var l=document.createElement("div");l.className="relatedImg";var e=document.createElement("img");e.setAttribute("stlink","http://sharethis.com/publishers/getbutton/");if(e.attachEvent){e.onclick=function(){gaLog("DoneScreen","ImgLinkClick");window.open(this.getAttribute("stlink"),"external","resizable=1,location=1,status=1,scrollbars=1,toolbar=1")}}else{e.setAttribute("onclick","gaLog('DoneScreen','ImgLinkClick');window.open('http://sharethis.com/publishers/getbutton/','external','resizable=1,location=1,status=1,scrollbars=1,toolbar=1');")}e.setAttribute("src",m);l.appendChild(e);d.appendChild(l);d.className="relatedShare hasImage";d.setAttribute("style","margin-top:35px");var c=document.createElement("div");c.className="relatedDetails";var b=document.createElement("span");b.className="relatedTitle link";b.setAttribute("stlink","http://sharethis.com/publishers/getbutton/");if(b.attachEvent){b.onclick=function(){gaLog("DoneScreen","TitleLinkClick");window.open(this.getAttribute("stlink"),"external","resizable=1,location=1,status=1,scrollbars=1,toolbar=1")}}else{b.setAttribute("onclick","gaLog('DoneScreen','TitleLinkClick');window.open('http://sharethis.com/publishers/getbutton/','external','resizable=1,location=1,status=1,scrollbars=1,toolbar=1');")}b.innerHTML=lang.strings.msg_get_button;c.appendChild(b);var a=document.createElement("span");a.className="relatedSource";a.appendChild(document.createTextNode(lang.strings.msg_put_sharethis));c.appendChild(a);var k=document.createElement("span");k.className="relatedShareCount";c.appendChild(k);d.appendChild(c);var j=document.createElement("div");j.className="clear";d.appendChild(j);g.appendChild(d)}}function hideDoneScreen(){document.getElementById("done_screen").style.display="none";document.getElementById("main").style.display="block"}function showDoneScreen(){document.getElementById("msg_share_success").style.visibility="visible";getRelatedShares(widget.URL);document.getElementById("done_screen").style.display="block";document.getElementById("main").style.display="none";document.getElementById("email_main").style.display="none";document.getElementById("poster_main").style.display="none";document.getElementById("btnShareAgain").onclick=function(){createPreferenceServices();hideDoneScreen();gaLog("DoneScreen","ShareAgain")}}function showHome(){document.getElementById("done_screen").style.display="none";document.getElementById("main").style.display="block";document.getElementById("email_main").style.display="none";document.getElementById("poster_main").style.display="none"}function logEvent(a,c){var e="";if(widget.toolbar==true){e="toolbar"}else{if(widget.page!="home"&&widget.page!=""){e="chicklet"}else{e="button"}}var d=(("https:"==document.location.protocol)?"https:/lws.":"http://l.")+"sharethis.com/log?event="+c;d+="&source="+e;d+="&publisher="+encodeURIComponent(widget.publisher);d+="&hostname="+encodeURIComponent(widget.hostname);d+="&location="+encodeURIComponent(widget.location);d+="&destinations="+a;d+="&ts"+(new Date()).getTime();d+="&title="+encodeURIComponent(widget.title);d+="&url="+encodeURIComponent(widget.URL);d+="&sessionID="+widget.sessionID;d+="&fpc="+widget.fpc;var b=new Image(1,1);b.src=d;b.onload=function(){return}}function getPubGA(){initGA();var a=["return=json","cb=getPubGA_onSuccess","service=getPublisherDomains","publisher="+widget.publisher];a=a.join("&");jsonp.makeRequest("http://wd.sharethis.com/api/getApi.php?"+a)}function getPubGA_onSuccess(a){var d=null;var e=new RegExp(widget.hostname,"gi");for(var c=0;c<a.data.domain.length;c++){var b=new RegExp(a.data.domain[c].name,"gi");if(b.test(a.data.domain[c].name)){d=a.data.domain[c].google_analytics}}if(d==null){for(var c=0;c<a.data.domain.length;c++){if(e.test(a.data.domain[c].name)){d=a.data.domain[c].google_analytics}}}if(typeof(_gat)!="undefined"&&d!==null&&typeof(d)!="undefined"){widget.pubTracker=_gat._getTracker(d)}}function shareLog(a){if(widget.pubTracker!=null){widget.pubTracker._trackEvent("ShareThis",a)}}var poster={};function createPoster(a){updateServiceCount(a);if(widget.title==null){widget.title=widget.URL}if(a=="twitter"){gaLog("Twitter","poster_clicked");widget.poster="twitter";document.getElementById("poster_heading_service").innerHTML="Twitter";document.getElementById("poster_textArea").style.display="block";document.getElementById("poster_textArea").value="";createShar();document.getElementById("poster_main").style.display="block";document.getElementById("comment_box").style.display="block";document.getElementById("poster_input_div").style.display="none";document.getElementById("main").style.display="none";document.getElementById("poster_textArea").onkeypress=poster.updateCounter;document.getElementById("poster_message_counter").style.display="block"}else{if(a=="wordpress"){widget.poster="wordpress";gaLog("Wordpress","poster_clicked");document.getElementById("poster_heading_service").innerHTML="Wordpress";document.getElementById("poster_textArea").style.display="none";document.getElementById("comment_box").style.display="none";document.getElementById("poster_input_div").style.display="block";document.getElementById("poster_main").style.display="block";document.getElementById("main").style.display="none";document.getElementById("poster_message_counter").style.display="none";document.getElementById("poster_message_counter").style.display="none"}}}poster.cancel=function(a){document.getElementById("poster_main").style.display="none";document.getElementById("main").style.display="block";widget.poster=null};poster.getCount=function(){var a=document.getElementById("poster_textArea");var b=a.value;if(b.length>=140){return false}else{return 140-b.length}};poster.updateCounter=function(d){try{var a=(window.event)?event.keyCode:d.keyCode}catch(b){a=0}var f=poster.getCount();var c=element=document.getElementById("counter");if(f===false){c.innerHTML=0;if(a!==0){return true}else{return false}}else{if(f<11){c.style.color="red"}else{c.style.color="#666666"}c.innerHTML=f}};poster.post=function(a){if(widget.poster=="twitter"){showLoadingBox(lang.strings.msg_posting_t);var d=["return=json","cb=poster.post_onSuccess","service=postTwitter","status="+encodeURIComponent(document.getElementById("poster_textArea").value),"url="+encodeURIComponent(widget.URL),"sessionID="+widget.sessionID];d=d.join("&");jsonp.makeRequest("http://wd.sharethis.com/api/getApi.php?"+d)}else{if(widget.poster=="wordpress"){if(document.getElementById("poster_inputBox").value.length<1){showModal(lang.strings.msg_valid_blog);return false}else{var c=document.getElementById("poster_inputBox").value;var b=(("https:"==document.location.protocol)?"https://ws.":"http://wd.")+"sharethis.com/api/sharer.php?destination={destination}&url={url}&title={title}&publisher={publisher}&fpc={fpc}&sessionID={sessionID}&wpurl={wpurl}&source=button";b=b.replace("{destination}","wordpress");b=b.replace("{url}",encodeURIComponent(widget.URL));b=b.replace("{title}",encodeURIComponent(widget.title));b=b.replace("{wpurl}",encodeURIComponent(c));b=b.replace("{publisher}",widget.publisher);b=b.replace("{fpc}",widget.fpc);b=b.replace("{sessionID}",widget.sessionID);window.open(b,"post_wordpress","status=1, height=700, width=970, resizable=0");widget.poster=null;showDoneScreen();return true}}}return true};poster.post_onSuccess=function(a){hideLoadingBox();widget.poster=null;showDoneScreen()};function createShar(){var b=widget.URL;if(b==widget.lastURL){var a=((widget.title!=null)?widget.title+" - ":"")+widget.sharURL;document.getElementById("poster_textArea").value=a;poster.updateCounter()}else{if(b!==""&&b!==" "&&b!==null){document.getElementById("poster_textArea").value=lang.strings.msg_loading;widget.lastURL=b;var c=["return=json","cb=createShar_onSuccess","service=createSharURL","url="+encodeURIComponent(b),"sessionID="+widget.sessionID,"fpc="+widget.fpc];c=c.join("&");jsonp.makeRequest("http://wd.sharethis.com/api/getApi.php?"+c)}}}function createShar_onSuccess(b){if(b.status=="SUCCESS"){widget.sharURL=b.data.sharURL}var a=((widget.title!=null)?widget.title+" - ":"")+widget.sharURL;document.getElementById("poster_textArea").value=a;poster.updateCounter()}function initGA(){if(typeof(_gat)=="undefined"){var d=(("https:"==document.location.protocol)?"https://ssl.":"http://www.");var a=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.src=d+"google-analytics.com/ga.js";a.appendChild(c);var b='try{widget.ga = _gat._getTracker("UA-1645146-9");widget.ga._trackPageview();} catch(err) {}';var c=document.createElement("script");c.type="text/javascript";c.text=b;a.appendChild(c)}}function gaLog(b,d,a,c){if(typeof(widget.ga)!="undefined"&&widget.ga!==null){widget.ga._trackEvent(b,d,a,c)}}if(typeof(lang)=="undefined"){var lang={};lang.strings=new Object;lang.strings.msg_loading="Loading???";lang.strings.msg_posting_t="Posting to Twitter";lang.strings.msg_text="Text to a Friend:";lang.strings.msg_email="Email to a Friend:";lang.strings.msg_sendign_inProgress="Sharing Message";lang.strings.msg_search_services="Search for services";lang.strings.msg_get_button="Get the Button!";lang.strings.msg_put_sharethis="Put ShareThis on your website or blog in minutes!";lang.strings.msg_valid_blog="Sorry, there was something wrong with that URL, please try again.";lang.strings.msg_post_wordpress="Post to Wordpress";lang.strings.msg_email_to="To:";lang.strings.msg_email_from="From:";lang.strings.msg_email_send="Send";lang.strings.msg_email_cancel="Cancel";lang.strings.msg_email_preview="Preview";lang.strings.msg_email_close_preview="Close Preview";lang.strings.msg_email_char_limit="2000 characters left";lang.strings.email_message="Message:";lang.strings.msg_email_privacy="Privacy Policy";lang.strings.msg_email_load_cont="Loading Contacts...";lang.strings.msg_import_serv="Import Contacts From";lang.strings.msg_email_captcha_info="Spam Prevention: Please type the words below:";lang.strings.msg_valid_email_add="Please enter a valid email address.";lang.strings.msg_valid_email_add_from='Please enter a valid email address in the "From" field.';lang.strings.msg_valid_recipients="Please enter a valid recipient";lang.strings.msg_captcha="Please enter the Captcha response.";lang.strings.msg_share="Share with Friends";lang.strings.msg_view_all="View All";lang.strings.msg_hide_all="Hide All";lang.strings.msg_share_success="Your message was successfully shared!";lang.strings.msg_share_again="Share Again";lang.strings.msg_related_shares="Popular Shares";lang.strings.msg_post_to="Post to";lang.strings.msg_message="Message:";lang.strings.msg_blog_url="Blog URL";lang.strings.msg_submit="Submit";lang.strings.msg_friends="What are your friends sharing?";lang.strings.msg_my_acct="My Account";lang.strings.msg_signin="Sign In";lang.strings.msg_signout="Sign Out"};