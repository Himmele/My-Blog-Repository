<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0050)http://x86.ddj.com/productivity/nulldescriptor.htm -->
<HTML><HEAD><TITLE>Null Descriptor</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META content="MSHTML 6.00.2600.0" name=GENERATOR></HEAD>
<BODY text=#000000 vLink=#330066 aLink=#ff0000 link=#0000ff bgColor=#ffffff 
leftMargin=8 background="Dr. Dobb - Null Descriptor-Dateien/back3.gif" 
topMargin=8 MARGINHEIGHT="8" MARGINWIDTH="8">
<TABLE cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR><!--------------- LEFT SIDE ------------>
    <TD vAlign=top><FONT face=arial,helvetica size=-1><A 
      href="http://x86.ddj.com/"><IMG height=90 
      src="Dr. Dobb - Null Descriptor-Dateien/logo_small.gif" width=115 
      align=top border=0></A><BR clear=all><!-- Left side nav items: two-column table, bullets in left column -->
      <TABLE cellSpacing=0 cellPadding=0 width=128 border=0>
        <TBODY>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://www.ddj.com/"><IMG height=20 alt="DDJ Home" 
            src="Dr. Dobb - Null Descriptor-Dateien/ddjhome.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD><IMG height=5 alt="" 
            src="Dr. Dobb - Null Descriptor-Dateien/spacer.gif" width=1 
            align=top><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/news/hotnews.htm"><IMG height=40 
            alt="Today's Headlines" 
            src="Dr. Dobb - Null Descriptor-Dateien/newnews.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/news/old.htm"><IMG height=20 
            alt="Past Headlines" 
            src="Dr. Dobb - Null Descriptor-Dateien/pastnews.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/articles/articles.htm"><IMG 
            height=40 alt="Microprocessor Articles" 
            src="Dr. Dobb - Null Descriptor-Dateien/m_articles.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/secrets/intelsecrets.htm"><IMG 
            height=20 alt="Intel Secrets" 
            src="Dr. Dobb - Null Descriptor-Dateien/intel.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/errata/errataseries.htm"><IMG 
            height=20 alt="Intel Errata" 
            src="Dr. Dobb - Null Descriptor-Dateien/errata.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/ddj/ddj.htm"><IMG height=40 
            alt="Undocumented Corner" 
            src="Dr. Dobb - Null Descriptor-Dateien/udoc.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/intel.doc/inteldocs.htm"><IMG 
            height=40 alt="Processor Manuals" 
            src="Dr. Dobb - Null Descriptor-Dateien/pmanual.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A 
            href="http://x86.ddj.com/intel.doc/intelmotherboards.htm"><IMG 
            height=40 alt="Motherboard Manuals" 
            src="Dr. Dobb - Null Descriptor-Dateien/mmanual.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD vAlign=top><IMG height=20 alt="* " 
            src="Dr. Dobb - Null Descriptor-Dateien/dot.gif" width=7 
            VALIGN="top"></TD>
          <TD><A href="http://x86.ddj.com/links.htm"><IMG height=20 alt=Links 
            src="Dr. Dobb - Null Descriptor-Dateien/links.gif" width=120 
            border=0></A><BR clear=all></TD></TR>
        <TR>
          <TD><IMG height=50 alt="" 
            src="Dr. Dobb - Null Descriptor-Dateien/spacer.gif" width=1 
            align=top><BR clear=all></TD></TR>
        <TR>
          <TD align=left colSpan=2><!-- REMOTE AD CALL <%/remoteviewad?site=x86&pagepos=buttonsponsor|site=x86|pagepos=buttonsponsor%> --><A 
            href="http://newads.cmpnet.com/event.ng/Type=click&amp;ProfileID=6783&amp;RunID=38371&amp;AdID=25450&amp;GroupID=304&amp;FamilyID=2749&amp;TagValues=2901.2949&amp;Redirect=http://www.sdmagazine.com" 
            target=_top><IMG height=1 alt="" 
            src="Dr. Dobb - Null Descriptor-Dateien/clear_1x1.gif" width=1 
            border=0></A> <!-- REMOTE AD CALL <%/remoteviewad?site=ddj&pagepos=buttonsponsor&uri=nav-bottom|uri=nav-bottom|site=ddj|pagepos=buttonsponsor%> --><!-- AD ERROR: No profiles found to match request (site=ddj, pagepos=buttonsponsor, server_name=, uri=)--></TD></TR></TBODY></TABLE></FONT></TD><!-- End left-hand column --><!--------------- MAIN BODY ------------>
    <TD vAlign=top>
      <TABLE cellSpacing=0 cellPadding=0 border=0>
        <TBODY>
        <TR>
          <TD><!-- First row: ad --><!-- REMOTE AD CALL <%/remoteviewad?site=x86&pagepos=top|site=x86|pagepos=top%> --><A 
            href="http://newads.cmpnet.com/event.ng/Type=click&amp;ProfileID=7160&amp;RunID=38321&amp;AdID=28991&amp;GroupID=320&amp;FamilyID=2748&amp;TagValues=178.2949&amp;Redirect=https://www.sdmediagroup.com/byte/" 
            target=_top><IMG height=60 alt="Click Here!" 
            src="Dr. Dobb - Null Descriptor-Dateien/ddj_tech_468.gif" width=468 
            border=1></A> </TD></TR>
        <TR>
          <TD background="Dr. Dobb - Null Descriptor-Dateien/dash_wide.gif"><!-- 2nd row: rule --><IMG 
            height=10 src="Dr. Dobb - Null Descriptor-Dateien/spacer.gif" 
            width=1> </TD></TR>
        <TR>
          <TD><!-- 3rd row: Header --><IMG height=40 
            alt="Microprocessor Resources" 
            src="Dr. Dobb - Null Descriptor-Dateien/microprocessor.gif" 
            width=350><BR clear=all><IMG height=10 
            src="D:\Eigene Dateien\OS Programming\Dr. Dobb - Null Descriptor-Dateien\spacer(1).gif" 
            width=1><BR></TD></TR>
        <TR>
          <TD><!-- 4th row: Page content -->
            <H1><A name=NULL_Descriptor></A>THE NULL DESCRIPTOR</H1>
            <HR>

            <P>The first entry in the Global Descriptor Table (GDT) is called 
            the null descriptor. The NULL descriptor is unique to the GDT, as it 
            has a TI=0, and INDEX=0. Most printed documentation states that this 
            descriptor table entry must be 0. Even Intel is somewhat ambiguous 
            on this subject, never saying what it CAN'T be used for. Intel does 
            state that the 0'th descriptor table entry is never referenced by 
            the processor.</P>
            <P>Since the processor never references the NULL descriptor, then 
            this implies that the data stored in its place can be used for any 
            purpose. My favorite use for the NULL descriptor is to use it as a 
            pointer to the GDT itself! The NULL descriptor is ideally suited for 
            this purpose. The LGDT instruction needs a six-byte pointer to the 
            GDT, and the NULL descriptor has 8 bytes that aren't accessed by the 
            CPU -- making it an ideal candidate for this purpose. (For you 
            sceptics, I've been doing this for about 10 years.)</P>
            <P>The normal protocol used in addressing the GDT is as follows:</P><PRE>     GDT_PTR   DW   GDT_LENGTH-1
               DD   PHYSICAL_GDT_ADDRESS
</PRE>
            <P>Then in the code segment:</P><PRE>     LGDT      GDT_PTR
</PRE>
            <P>Using the NULL descriptor as a pointer to the GDT, simplifies the 
            data segment, and conceptualization of the GDT as follows:</P><PRE>                  +-----------------+
                  |                 |
                  V                 |  Offset
     +------------------------+     |
GDT  |   Pointer to the GDT   |  ---+  00h
     +------------------------+
     |                        |        08h
     +------------------------+
     |    ...  ...  ...  ...  |
</PRE>
            <P>Then in the code segment:</P><PRE>     LGDT      GDT
</PRE>
            <P>The GDT_PTR variable is no longer needed, as the NULL descriptor 
            is used in its place. Using the NULL descriptor in this manner 
            offers a 'cleaner' approach to addressing the GDT.This technique can 
            be viewed in any of my assembler source code files that use 
            protected mode -- <A 
            href="http://x86.ddj.com/ftp/source/int09/int09.asm">INT09.ASM</A> 
            for example.</P>
            <P>View source code:<BR><A 
            href="http://x86.ddj.com/ftp/source/int09/int09.asm">ftp://ftp.x86.org/pub/x86/source/int09/int09.asm<BR></A><A 
            href="http://x86.ddj.com/ftp/source/386load/macros.386">ftp://ftp.x86.org/pub/x86/source/386load/macros.386<BR><BR></A>Download 
            entire source code archive:<BR><A 
            href="http://x86.ddj.com/ftp/dloads/int09.zip">http://x86.ddj.com/ftp/dloads/int09.zip</A><BR></P>
            <HR>

            <P><A 
            href="http://x86.ddj.com/productivity/productivityenhancements.htm#nulldescptr">Back 
            to Productivity Enhancements</A></P></TD></TR>
        <TR>
          <TD background="Dr. Dobb - Null Descriptor-Dateien/dash_wide.gif"><!-- rule --><IMG 
            height=10 src="Dr. Dobb - Null Descriptor-Dateien/spacer.gif" 
            width=1> </TD></TR>
        <TR>
          <TD><!-- Bottom Advertisement -->
            <TABLE cellSpacing=0 cellPadding=1 width=490 bgColor=#cccccc 
            border=0>
              <TBODY>
              <TR>
                <TD vAlign=center align=middle><FONT face=Arial 
                  size=1>Advertisement</FONT> </TD></TR>
              <TR>
                <TD vAlign=center align=middle><!-- REMOTE AD CALL <%/remoteviewad?site=x86&pagepos=bottom|site=x86|pagepos=bottom%> --><A 
                  href="http://newads.cmpnet.com/event.ng/Type=click&amp;ProfileID=7167&amp;RunID=39005&amp;AdID=29421&amp;GroupID=320&amp;FamilyID=1&amp;TagValues=179.2949&amp;Redirect=http://www.microsoft.com/redirect.asp?PageID=157&amp;PARAM=TECWDOB&amp;TARGET=http://msdn.microsoft.com/events/teched/" 
                  target=_top><IMG height=60 alt="" 
                  src="Dr. Dobb - Null Descriptor-Dateien/micro_contest_2.gif" 
                  width=468 border=1></A> </TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD><!-- Copyright message --><FONT face="Arial, Helvetica" 
            size=-1>Copyright © 2002 <I>Dr. Dobb's 
        Journal<BR></I></FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></BODY></HTML>
